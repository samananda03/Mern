(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[478],{40929:function(e){function n(e){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}n.keys=function(){return[]},n.resolve=n,n.id=40929,e.exports=n},88986:function(e,n,a){"use strict";a.d(n,{Z:function(){return f}});a(57327),a(54747),a(49337);var r=a(4942),s=a(44925);const l={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"PlansButton_me",selections:[{args:null,kind:"FragmentSpread",name:"CodeshareProModal_me"}],type:"Me",abstractKey:null,hash:"2b27f7dc84ef4f6695b151da7adf33a9"};var t=l,o=a(74579),i=a(67294),d=a(67912),u=a(88575),c=a(67814),m=a(51436),g=a(85893);const h=["me","children","locationDesc","noIcon"];function p(e,n){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),a.push.apply(a,r)}return a}function y(e){for(var n=1;n<arguments.length;n++){var a=null!=arguments[n]?arguments[n]:{};n%2?p(Object(a),!0).forEach((function(n){(0,r.Z)(e,n,a[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):p(Object(a)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))}))}return e}var f=e=>{const n=e.me,a=e.children,r=e.locationDesc,l=e.noIcon,p=(0,s.Z)(e,h),f=(0,i.useState)(!1),C=f[0],k=f[1],b=(0,d.useFragment)(t,n);return(0,g.jsxs)(i.Fragment,{children:[(0,g.jsxs)(o.ZP,y(y({},p),{},{onClick:e=>{e.stopPropagation(),e.preventDefault(),k(!0)},children:[l?null:(0,g.jsx)(c.G,{icon:m.Tab}),l?null:" ",a]})),C?(0,g.jsx)(u.Z,{trigger:"plans-button-".concat(r),me:b,onClose:()=>k(!1)}):null]})}},88575:function(e,n,a){"use strict";a.d(n,{Z:function(){return p}});const r={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CodeshareProModal_codeshare",selections:[{args:null,kind:"FragmentSpread",name:"CodesharePlans_codeshare"}],type:"Codeshare",abstractKey:null,hash:"df28057b69c7076a2fff28724aca8771"};var s=r;const l={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CodeshareProModal_me",selections:[{args:null,kind:"FragmentSpread",name:"CodesharePlans_me"}],type:"Me",abstractKey:null,hash:"8e0fb67fd71f7761da7bac07bc0ff201"};var t=l,o=a(75312),i=a(67814),d=a(57243),u=a(51436),c=a(85893);var m=e=>(0,c.jsx)(d.Z,{name:e.name,children:(0,c.jsxs)("div",{className:"modal full",onClick:e=>e.stopPropagation(),onKeyDown:n=>{"Escape"===n.key&&e.onClose()},children:[(0,c.jsx)("button",{className:"btn btn-icon btn-icon-lg modal__close",onClick:()=>e.onClose(),children:(0,c.jsx)(i.G,{icon:u.NBC})}),e.renderContent?e.renderContent({onClose:e.onClose}):null]})}),g=a(30924),h=a(67912);function p(e){const n=(0,h.useFragment)(t,e.me),a=e.codeshare?(0,h.useFragment)(s,e.codeshare):void 0;return(0,c.jsx)(m,{name:"codeshare-pro-modal",onClose:e.onClose,renderContent:()=>(g.Z.track("Open PRO info modal",{trigger:e.trigger}),(0,c.jsx)(o.Z,{trigger:e.trigger,me:n,codeshare:a,onSuccess:e.onClose}))})}},2655:function(e,n){"use strict";n.Z=["2","4","6","8"]},77269:function(e,n,a){"use strict";a.r(n);var r;a(15306);n.default=(r=function(e,n){e.modeURL||(e.modeURL="../mode/%N/%N.js");var a={};function r(n,a){var r=e.modes[n].dependencies;if(!r)return a();for(var s=[],l=0;l<r.length;++l)e.modes.hasOwnProperty(r[l])||s.push(r[l]);if(!s.length)return a();var t=function(e,n){var a=n;return function(){0==--a&&e()}}(a,s.length);for(l=0;l<s.length;++l)e.requireMode(s[l],t)}e.requireMode=function(n,s){if("string"!=typeof n&&(n=n.name),e.modes.hasOwnProperty(n))return r(n,s);if(a.hasOwnProperty(n))return a[n].push(s);var l=e.modeURL.replace(/%N/g,n),t=document.createElement("script");t.src=l;var o=document.getElementsByTagName("script")[0],i=a[n]=[s];e.on(t,"load",(function(){r(n,(function(){for(var e=0;e<i.length;++e)i[e]()}))})),o.parentNode.insertBefore(t,o)},e.autoLoadMode=function(n,a){e.modes.hasOwnProperty(a)||e.requireMode(a,(function(){n.setOption("mode",n.getOption("mode"))}))}},void("object"==typeof exports?r(a(4631)):"function"==typeof define&&a.amdO?define(["codemirror"],(function(e){r(e)})):r(CodeMirror)))},6255:function(e,n,a){"use strict";a.r(n),a.d(n,{default:function(){return qs}});a(57327),a(54747),a(49337);var r=a(4942),s=a(15861),l=(a(4723),a(87757)),t=a.n(l);const o=function(){var e={defaultValue:null,kind:"LocalArgument",name:"codeHistoryAfter"},n={defaultValue:null,kind:"LocalArgument",name:"codeHistoryFirst"},a={defaultValue:null,kind:"LocalArgument",name:"codeshareId"},r={defaultValue:null,kind:"LocalArgument",name:"codeshareUsersAfter"},s={defaultValue:null,kind:"LocalArgument",name:"codeshareUsersFirst"},l={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},t={alias:null,args:null,kind:"ScalarField",name:"anonymous",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"email",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},d=[{kind:"Variable",name:"id",variableName:"codeshareId"}],u={alias:null,args:[{kind:"Literal",name:"first",value:100}],concreteType:"SubscriptionPlanConnection",kind:"LinkedField",name:"subscriptionPlans",plural:!1,selections:[{alias:null,args:null,concreteType:"SubscriptionPlanConnectionEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"SubscriptionPlan",kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"isActive",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"planId",storageKey:null},l],storageKey:null}],storageKey:null}],storageKey:"subscriptionPlans(first:100)"},c={alias:null,args:null,kind:"ScalarField",name:"createdAt",storageKey:null},m={alias:null,args:null,kind:"ScalarField",name:"me",storageKey:null},g={alias:null,args:null,kind:"ScalarField",name:"userId",storageKey:null},h={alias:null,args:null,kind:"ScalarField",name:"value",storageKey:null},p={alias:null,args:null,kind:"ScalarField",name:"historyId",storageKey:null},y={alias:null,args:null,concreteType:"CreatedBy",kind:"LinkedField",name:"createdBy",plural:!1,selections:[m,g,{alias:null,args:null,kind:"ScalarField",name:"clientId",storageKey:null}],storageKey:null},f={alias:null,args:null,kind:"ScalarField",name:"cursor",storageKey:null},C=[{kind:"Variable",name:"after",variableName:"codeHistoryAfter"},{kind:"Variable",name:"first",variableName:"codeHistoryFirst"}],k={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},b={alias:null,args:null,concreteType:"PageInfo",kind:"LinkedField",name:"pageInfo",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"endCursor",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"hasNextPage",storageKey:null}],storageKey:null},F=[{kind:"Variable",name:"after",variableName:"codeshareUsersAfter"},{kind:"Variable",name:"first",variableName:"codeshareUsersFirst"}],S=[g,m];return{fragment:{argumentDefinitions:[e,n,a,r,s],kind:"Fragment",metadata:null,name:"CodeshareIdQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,concreteType:"Me",kind:"LinkedField",name:"me",plural:!1,selections:[l,t,o,i],storageKey:null},{args:null,kind:"FragmentSpread",name:"CodesharePage_viewer"}],storageKey:null},{alias:null,args:d,concreteType:"Codeshare",kind:"LinkedField",name:"codeshare",plural:!1,selections:[l,{args:null,kind:"FragmentSpread",name:"CodesharePage_codeshare"}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[a,e,n,s,r],kind:"Operation",name:"CodeshareIdQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,concreteType:"Me",kind:"LinkedField",name:"me",plural:!1,selections:[l,t,o,i,{alias:null,args:null,concreteType:"UserSettings",kind:"LinkedField",name:"settings",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"theme",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"keymap",storageKey:null}],storageKey:null},u],storageKey:null}],storageKey:null},{alias:null,args:d,concreteType:"Codeshare",kind:"LinkedField",name:"codeshare",plural:!1,selections:[l,c,{alias:null,args:null,concreteType:"CreatedBy",kind:"LinkedField",name:"createdBy",plural:!1,selections:[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"user",plural:!1,selections:[u,l,{alias:null,args:null,kind:"ScalarField",name:"companyImage",storageKey:null},i,t],storageKey:null},m,g],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},{alias:null,args:null,concreteType:"CanEdit",kind:"LinkedField",name:"canEdit",plural:!1,selections:[m,{alias:null,args:null,kind:"ScalarField",name:"userIds",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"modeName",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"tabSize",storageKey:null},{alias:null,args:null,concreteType:"CodeCheckpoint",kind:"LinkedField",name:"codeCheckpoint",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"codeHistoryId",storageKey:null},h,{alias:null,args:null,concreteType:"CodeHistoryEdge",kind:"LinkedField",name:"codeHistoryEdge",plural:!1,selections:[{alias:null,args:null,concreteType:"CodeHistory",kind:"LinkedField",name:"node",plural:!1,selections:[l,p,h,c,y],storageKey:null},f],storageKey:null}],storageKey:null},{alias:null,args:C,concreteType:"CodeHistoryConnection",kind:"LinkedField",name:"codeHistory",plural:!1,selections:[{alias:null,args:null,concreteType:"CodeHistoryConnectionEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"CodeHistory",kind:"LinkedField",name:"node",plural:!1,selections:[l,p,h,c,y,k],storageKey:null},f],storageKey:null},b],storageKey:null},{alias:null,args:C,filters:null,handle:"connection",key:"Codeshare_codeHistory",kind:"LinkedHandle",name:"codeHistory"},{alias:null,args:F,concreteType:"CodeshareUsersConnection",kind:"LinkedField",name:"users",plural:!1,selections:[{alias:null,args:null,concreteType:"CodeshareUserConnectionEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"CodeshareUser",kind:"LinkedField",name:"node",plural:!1,selections:[l,c,{alias:null,args:null,kind:"ScalarField",name:"modifiedAt",storageKey:null},{alias:null,args:null,concreteType:"CreatedBy",kind:"LinkedField",name:"createdBy",plural:!1,selections:S,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"color",storageKey:null},{alias:null,args:null,concreteType:"CursorType",kind:"LinkedField",name:"cursor",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"position",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"selectionEnd",storageKey:null}],storageKey:null},k],storageKey:null},f],storageKey:null},b],storageKey:null},{alias:null,args:F,filters:[],handle:"connection",key:"Codeshare_users",kind:"LinkedHandle",name:"users"},{alias:null,args:null,concreteType:"ModifiedBy",kind:"LinkedField",name:"modifiedBy",plural:!1,selections:S,storageKey:null}],storageKey:null}]},params:{cacheID:"61705894b6ca2a078f8541499077d1dd",id:null,metadata:{},name:"CodeshareIdQuery",operationKind:"query",text:"query CodeshareIdQuery(\n  $codeshareId: String!\n  $codeHistoryAfter: String\n  $codeHistoryFirst: Int!\n  $codeshareUsersFirst: Int!\n  $codeshareUsersAfter: String\n) {\n  viewer {\n    me {\n      id\n      anonymous\n      email\n      name\n    }\n    ...CodesharePage_viewer\n  }\n  codeshare(id: $codeshareId) {\n    id\n    ...CodesharePage_codeshare\n  }\n}\n\nfragment AuthUserNavbar_me on Me {\n  anonymous\n  name\n  email\n  ...Gravatar_me\n}\n\nfragment CodeMirrorCursor_codeshare on Codeshare {\n  canEdit {\n    me\n    userIds\n  }\n}\n\nfragment CodeshareCodeMirror_codeshare on Codeshare {\n  ...useCodeshareModeName_codeshare\n  ...useCodeshareTabSize_codeshare\n  ...CodeMirrorCursor_codeshare\n  canEdit {\n    me\n    userIds\n  }\n}\n\nfragment CodeshareCodeMirror_me on Me {\n  id\n  ...useTheme_me\n  ...useKeymap_me\n}\n\nfragment CodeshareDownloadButton_codeshare on Codeshare {\n  title\n  createdAt\n  modeName\n}\n\nfragment CodeshareEditor_codeshare on Codeshare {\n  ...CodeshareFirepad_codeshare\n}\n\nfragment CodeshareEditor_me on Me {\n  ...CodeshareFirepad_me\n}\n\nfragment CodeshareFirepad_codeshare on Codeshare {\n  id\n  ...CodeshareCodeMirror_codeshare\n  ...useCodeshareCodeHistories_codeshare\n  ...useCodeshareUsers_codeshare\n  canEdit {\n    me\n    userIds\n  }\n}\n\nfragment CodeshareFirepad_me on Me {\n  id\n  ...CodeshareCodeMirror_me\n}\n\nfragment CodeshareHead_codeshare on Codeshare {\n  ...CodeshareLazyHead_codeshare\n}\n\nfragment CodeshareHead_me on Me {\n  ...CodeshareLazyHead_me\n  ...useKeymap_me\n}\n\nfragment CodeshareKeymapFormField_me on Me {\n  ...useKeymap_me\n}\n\nfragment CodeshareLazyHead_codeshare on Codeshare {\n  createdAt\n  title\n}\n\nfragment CodeshareLazyHead_me on Me {\n  ...useTheme_me\n}\n\nfragment CodeshareModeNameFormField_codeshare on Codeshare {\n  ...useCodeshareModeName_codeshare\n  canEdit {\n    me\n    userIds\n  }\n}\n\nfragment CodeshareNavbar_codeshare on Codeshare {\n  id\n  createdBy {\n    me\n    user {\n      companyImage\n      id\n    }\n  }\n  title\n  createdAt\n  ...CodeshareShareButton_codeshare\n  ...CodeshareShareModal_codeshare\n}\n\nfragment CodeshareNavbar_me on Me {\n  anonymous\n  ...UserNavbar_me\n  ...CodeshareShareModal_me\n  ...PlansButton_me\n  ...isCodeshareProSubscriber_me\n}\n\nfragment CodesharePage_codeshare on Codeshare {\n  createdAt\n  createdBy {\n    user {\n      ...isCodeshareProSubscriber_user\n      id\n    }\n  }\n  title\n  ...CodeshareHead_codeshare\n  ...CodeshareNavbar_codeshare\n  ...CodeshareEditor_codeshare\n  ...CodeshareSidebar_codeshare\n  ...NagModal_codeshare\n}\n\nfragment CodesharePage_viewer on Viewer {\n  me {\n    ...CodeshareHead_me\n    ...CodeshareNavbar_me\n    ...CodeshareEditor_me\n    ...CodeshareSidebar_me\n    ...NagModal_me\n    ...isCodeshareProSubscriber_me\n    ...SponsorAllInOne_me\n    id\n  }\n}\n\nfragment CodesharePlans_me on Me {\n  anonymous\n  ...CodeshareProCheckoutModal_me\n  ...isCodeshareProSubscriber_me\n  ...LoginRegisterModal_me\n}\n\nfragment CodeshareProCheckoutModal_me on Me {\n  ...CodeshareProForm_me\n}\n\nfragment CodeshareProForm_me on Me {\n  id\n  email\n}\n\nfragment CodeshareProModal_me on Me {\n  ...CodesharePlans_me\n}\n\nfragment CodeshareSettingsForm_codeshare on Codeshare {\n  ...CodeshareTitleFormField_codeshare\n  ...CodeshareModeNameFormField_codeshare\n  ...CodeshareTabSizeFormField_codeshare\n}\n\nfragment CodeshareSettingsForm_me on Me {\n  anonymous\n  ...CodeshareThemeFormField_me\n  ...CodeshareKeymapFormField_me\n}\n\nfragment CodeshareShareButton_codeshare on Codeshare {\n  canEdit {\n    me\n    userIds\n  }\n}\n\nfragment CodeshareShareModal_codeshare on Codeshare {\n  ...CodeshareShareUrl_codeshare\n  ...CodeshareViewOnlyCheckbox_codeshare\n}\n\nfragment CodeshareShareModal_me on Me {\n  ...CodeshareViewOnlyCheckbox_me\n}\n\nfragment CodeshareShareUrl_codeshare on Codeshare {\n  id\n}\n\nfragment CodeshareSidebar_codeshare on Codeshare {\n  ...CodeshareSettingsForm_codeshare\n  ...CodeshareDownloadButton_codeshare\n  createdBy {\n    user {\n      ...isCodeshareProSubscriber_user\n      id\n    }\n  }\n}\n\nfragment CodeshareSidebar_me on Me {\n  ...isCodeshareProSubscriber_me\n  ...CodeshareSettingsForm_me\n}\n\nfragment CodeshareTabSizeFormField_codeshare on Codeshare {\n  ...useCodeshareTabSize_codeshare\n  canEdit {\n    me\n    userIds\n  }\n}\n\nfragment CodeshareThemeFormField_me on Me {\n  ...useTheme_me\n}\n\nfragment CodeshareTitleFormField_codeshare on Codeshare {\n  ...useCodeshareTitle_codeshare\n  canEdit {\n    me\n    userIds\n  }\n}\n\nfragment CodeshareViewOnlyCheckbox_codeshare on Codeshare {\n  id\n  createdBy {\n    me\n    userId\n    user {\n      id\n      name\n    }\n  }\n  ...isCodeshareViewOnly_codeshare\n}\n\nfragment CodeshareViewOnlyCheckbox_me on Me {\n  anonymous\n  ...isCodeshareProSubscriber_me\n  ...CodeshareProModal_me\n}\n\nfragment Gravatar_me on Me {\n  name\n  email\n}\n\nfragment LoginForm_codeshare on Codeshare {\n  id\n  createdBy {\n    userId\n    me\n  }\n  modifiedBy {\n    userId\n    me\n  }\n  canEdit {\n    userIds\n    me\n  }\n}\n\nfragment LoginForm_me on Me {\n  id\n}\n\nfragment LoginRegisterModal_codeshare on Codeshare {\n  id\n  createdBy {\n    me\n    user {\n      anonymous\n      id\n    }\n  }\n  ...LoginForm_codeshare\n  ...RegisterForm_codeshare\n}\n\nfragment LoginRegisterModal_me on Me {\n  ...LoginForm_me\n  ...RegisterForm_me\n}\n\nfragment NagModal_codeshare on Codeshare {\n  ...LoginRegisterModal_codeshare\n  createdBy {\n    me\n    user {\n      ...isCodeshareProSubscriber_user\n      id\n    }\n  }\n}\n\nfragment NagModal_me on Me {\n  anonymous\n  ...LoginRegisterModal_me\n}\n\nfragment PlansButton_me on Me {\n  ...CodeshareProModal_me\n}\n\nfragment RegisterForm_codeshare on Codeshare {\n  id\n  createdBy {\n    userId\n    me\n  }\n  modifiedBy {\n    userId\n    me\n  }\n  canEdit {\n    userIds\n    me\n  }\n}\n\nfragment RegisterForm_me on Me {\n  id\n}\n\nfragment SimpleOptimizeSponsor_me on Me {\n  ...PlansButton_me\n}\n\nfragment SimpleSadFace_me on Me {\n  ...PlansButton_me\n  ...SponsorScriptToast_me\n}\n\nfragment SimpleSponsorFooter_me on Me {\n  ...PlansButton_me\n}\n\nfragment SponsorAllInOne_me on Me {\n  ...SimpleSponsorFooter_me\n  ...SimpleOptimizeSponsor_me\n  ...SimpleSadFace_me\n}\n\nfragment SponsorScriptToast_me on Me {\n  ...PlansButton_me\n}\n\nfragment UserNavbar_me on Me {\n  anonymous\n  ...AuthUserNavbar_me\n}\n\nfragment isCodeshareProSubscriber_me on Me {\n  subscriptionPlans(first: 100) {\n    edges {\n      node {\n        isActive\n        planId\n        id\n      }\n    }\n  }\n}\n\nfragment isCodeshareProSubscriber_user on User {\n  subscriptionPlans(first: 100) {\n    edges {\n      node {\n        isActive\n        planId\n        id\n      }\n    }\n  }\n}\n\nfragment isCodeshareViewOnly_codeshare on Codeshare {\n  canEdit {\n    userIds\n  }\n}\n\nfragment refetchableCodeHistoryEdges_codeshare on Codeshare {\n  id\n  createdBy {\n    userId\n    me\n  }\n  codeCheckpoint {\n    codeHistoryId\n    value\n    codeHistoryEdge {\n      node {\n        id\n        historyId\n        value\n        createdAt\n        createdBy {\n          me\n          userId\n          clientId\n        }\n      }\n      cursor\n    }\n  }\n  codeHistory(after: $codeHistoryAfter, first: $codeHistoryFirst) {\n    edges {\n      node {\n        id\n        historyId\n        value\n        createdAt\n        createdBy {\n          me\n          userId\n          clientId\n        }\n        __typename\n      }\n      cursor\n    }\n    pageInfo {\n      endCursor\n      hasNextPage\n    }\n  }\n}\n\nfragment refetchableCodeshareUserEdges_codeshare on Codeshare {\n  id\n  createdBy {\n    userId\n    me\n  }\n  users(first: $codeshareUsersFirst, after: $codeshareUsersAfter) {\n    edges {\n      node {\n        id\n        createdAt\n        modifiedAt\n        createdBy {\n          userId\n          me\n        }\n        color\n        cursor {\n          position\n          selectionEnd\n        }\n        __typename\n      }\n      cursor\n    }\n    pageInfo {\n      endCursor\n      hasNextPage\n    }\n  }\n}\n\nfragment useCodeshareCodeHistories_codeshare on Codeshare {\n  id\n  ...refetchableCodeHistoryEdges_codeshare\n}\n\nfragment useCodeshareModeName_codeshare on Codeshare {\n  id\n  modeName\n}\n\nfragment useCodeshareTabSize_codeshare on Codeshare {\n  id\n  tabSize\n}\n\nfragment useCodeshareTitle_codeshare on Codeshare {\n  id\n  createdAt\n  title\n}\n\nfragment useCodeshareUsers_codeshare on Codeshare {\n  id\n  ...refetchableCodeshareUserEdges_codeshare\n}\n\nfragment useKeymap_me on Me {\n  id\n  anonymous\n  settings {\n    keymap\n  }\n}\n\nfragment useTheme_me on Me {\n  id\n  anonymous\n  settings {\n    theme\n  }\n}\n"}}}();o.hash="b85d4a61f19a6dd2e6fc7ad737533ac9";var i=o;const d=function(){var e={defaultValue:null,kind:"LocalArgument",name:"codeHistoryAfter"},n={defaultValue:null,kind:"LocalArgument",name:"codeHistoryFirst"},a={defaultValue:null,kind:"LocalArgument",name:"codeshareId"},r={defaultValue:null,kind:"LocalArgument",name:"codeshareUsersAfter"},s={defaultValue:null,kind:"LocalArgument",name:"codeshareUsersFirst"},l=[{kind:"Variable",name:"id",variableName:"codeshareId"}],t={alias:null,args:null,kind:"ScalarField",name:"createdAt",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"me",storageKey:null},d={alias:null,args:null,kind:"ScalarField",name:"userId",storageKey:null},u={alias:null,args:null,kind:"ScalarField",name:"value",storageKey:null},c={alias:null,args:null,kind:"ScalarField",name:"historyId",storageKey:null},m={alias:null,args:null,concreteType:"CreatedBy",kind:"LinkedField",name:"createdBy",plural:!1,selections:[i,d,{alias:null,args:null,kind:"ScalarField",name:"clientId",storageKey:null}],storageKey:null},g={alias:null,args:null,kind:"ScalarField",name:"cursor",storageKey:null},h=[{kind:"Variable",name:"after",variableName:"codeHistoryAfter"},{kind:"Variable",name:"first",variableName:"codeHistoryFirst"}],p={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},y={alias:null,args:null,concreteType:"PageInfo",kind:"LinkedField",name:"pageInfo",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"endCursor",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"hasNextPage",storageKey:null}],storageKey:null},f=[{kind:"Variable",name:"after",variableName:"codeshareUsersAfter"},{kind:"Variable",name:"first",variableName:"codeshareUsersFirst"}],C=[d,i];return{fragment:{argumentDefinitions:[e,n,a,r,s],kind:"Fragment",metadata:null,name:"CodeshareIdCodeshareReconnectQuery",selections:[{alias:null,args:l,concreteType:"Codeshare",kind:"LinkedField",name:"codeshare",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"CodesharePage_codeshare"},{args:null,kind:"FragmentSpread",name:"CodesharePageSubscription_codeshare"}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[a,e,n,s,r],kind:"Operation",name:"CodeshareIdCodeshareReconnectQuery",selections:[{alias:null,args:l,concreteType:"Codeshare",kind:"LinkedField",name:"codeshare",plural:!1,selections:[t,{alias:null,args:null,concreteType:"CreatedBy",kind:"LinkedField",name:"createdBy",plural:!1,selections:[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"user",plural:!1,selections:[{alias:null,args:[{kind:"Literal",name:"first",value:100}],concreteType:"SubscriptionPlanConnection",kind:"LinkedField",name:"subscriptionPlans",plural:!1,selections:[{alias:null,args:null,concreteType:"SubscriptionPlanConnectionEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"SubscriptionPlan",kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"isActive",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"planId",storageKey:null},o],storageKey:null}],storageKey:null}],storageKey:"subscriptionPlans(first:100)"},o,{alias:null,args:null,kind:"ScalarField",name:"companyImage",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"anonymous",storageKey:null}],storageKey:null},i,d],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},o,{alias:null,args:null,concreteType:"CanEdit",kind:"LinkedField",name:"canEdit",plural:!1,selections:[i,{alias:null,args:null,kind:"ScalarField",name:"userIds",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"modeName",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"tabSize",storageKey:null},{alias:null,args:null,concreteType:"CodeCheckpoint",kind:"LinkedField",name:"codeCheckpoint",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"codeHistoryId",storageKey:null},u,{alias:null,args:null,concreteType:"CodeHistoryEdge",kind:"LinkedField",name:"codeHistoryEdge",plural:!1,selections:[{alias:null,args:null,concreteType:"CodeHistory",kind:"LinkedField",name:"node",plural:!1,selections:[o,c,u,t,m],storageKey:null},g],storageKey:null}],storageKey:null},{alias:null,args:h,concreteType:"CodeHistoryConnection",kind:"LinkedField",name:"codeHistory",plural:!1,selections:[{alias:null,args:null,concreteType:"CodeHistoryConnectionEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"CodeHistory",kind:"LinkedField",name:"node",plural:!1,selections:[o,c,u,t,m,p],storageKey:null},g],storageKey:null},y],storageKey:null},{alias:null,args:h,filters:null,handle:"connection",key:"Codeshare_codeHistory",kind:"LinkedHandle",name:"codeHistory"},{alias:null,args:f,concreteType:"CodeshareUsersConnection",kind:"LinkedField",name:"users",plural:!1,selections:[{alias:null,args:null,concreteType:"CodeshareUserConnectionEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"CodeshareUser",kind:"LinkedField",name:"node",plural:!1,selections:[o,t,{alias:null,args:null,kind:"ScalarField",name:"modifiedAt",storageKey:null},{alias:null,args:null,concreteType:"CreatedBy",kind:"LinkedField",name:"createdBy",plural:!1,selections:C,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"color",storageKey:null},{alias:null,args:null,concreteType:"CursorType",kind:"LinkedField",name:"cursor",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"position",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"selectionEnd",storageKey:null}],storageKey:null},p],storageKey:null},g],storageKey:null},y],storageKey:null},{alias:null,args:f,filters:[],handle:"connection",key:"Codeshare_users",kind:"LinkedHandle",name:"users"},{alias:null,args:null,concreteType:"ModifiedBy",kind:"LinkedField",name:"modifiedBy",plural:!1,selections:C,storageKey:null}],storageKey:null}]},params:{cacheID:"0d7f9d5558a1217a057364052a279431",id:null,metadata:{},name:"CodeshareIdCodeshareReconnectQuery",operationKind:"query",text:"query CodeshareIdCodeshareReconnectQuery(\n  $codeshareId: String!\n  $codeHistoryAfter: String\n  $codeHistoryFirst: Int!\n  $codeshareUsersFirst: Int!\n  $codeshareUsersAfter: String\n) {\n  codeshare(id: $codeshareId) {\n    ...CodesharePage_codeshare\n    ...CodesharePageSubscription_codeshare\n    id\n  }\n}\n\nfragment CodeMirrorCursor_codeshare on Codeshare {\n  canEdit {\n    me\n    userIds\n  }\n}\n\nfragment CodeshareCodeMirror_codeshare on Codeshare {\n  ...useCodeshareModeName_codeshare\n  ...useCodeshareTabSize_codeshare\n  ...CodeMirrorCursor_codeshare\n  canEdit {\n    me\n    userIds\n  }\n}\n\nfragment CodeshareDownloadButton_codeshare on Codeshare {\n  title\n  createdAt\n  modeName\n}\n\nfragment CodeshareEditor_codeshare on Codeshare {\n  ...CodeshareFirepad_codeshare\n}\n\nfragment CodeshareFirepad_codeshare on Codeshare {\n  id\n  ...CodeshareCodeMirror_codeshare\n  ...useCodeshareCodeHistories_codeshare\n  ...useCodeshareUsers_codeshare\n  canEdit {\n    me\n    userIds\n  }\n}\n\nfragment CodeshareHead_codeshare on Codeshare {\n  ...CodeshareLazyHead_codeshare\n}\n\nfragment CodeshareLazyHead_codeshare on Codeshare {\n  createdAt\n  title\n}\n\nfragment CodeshareModeNameFormField_codeshare on Codeshare {\n  ...useCodeshareModeName_codeshare\n  canEdit {\n    me\n    userIds\n  }\n}\n\nfragment CodeshareNavbar_codeshare on Codeshare {\n  id\n  createdBy {\n    me\n    user {\n      companyImage\n      id\n    }\n  }\n  title\n  createdAt\n  ...CodeshareShareButton_codeshare\n  ...CodeshareShareModal_codeshare\n}\n\nfragment CodesharePageSubscription_codeshare on Codeshare {\n  ...CodeshareSidebarSubscription_codeshare\n}\n\nfragment CodesharePage_codeshare on Codeshare {\n  createdAt\n  createdBy {\n    user {\n      ...isCodeshareProSubscriber_user\n      id\n    }\n  }\n  title\n  ...CodeshareHead_codeshare\n  ...CodeshareNavbar_codeshare\n  ...CodeshareEditor_codeshare\n  ...CodeshareSidebar_codeshare\n  ...NagModal_codeshare\n}\n\nfragment CodeshareSettingsFormSubscription_codeshare on Codeshare {\n  ...CodeshareTitleFormField_codeshare\n  ...CodeshareModeNameFormField_codeshare\n  ...CodeshareTabSizeFormField_codeshare\n}\n\nfragment CodeshareSettingsForm_codeshare on Codeshare {\n  ...CodeshareTitleFormField_codeshare\n  ...CodeshareModeNameFormField_codeshare\n  ...CodeshareTabSizeFormField_codeshare\n}\n\nfragment CodeshareShareButton_codeshare on Codeshare {\n  canEdit {\n    me\n    userIds\n  }\n}\n\nfragment CodeshareShareModal_codeshare on Codeshare {\n  ...CodeshareShareUrl_codeshare\n  ...CodeshareViewOnlyCheckbox_codeshare\n}\n\nfragment CodeshareShareUrl_codeshare on Codeshare {\n  id\n}\n\nfragment CodeshareSidebarSubscription_codeshare on Codeshare {\n  ...CodeshareSettingsFormSubscription_codeshare\n}\n\nfragment CodeshareSidebar_codeshare on Codeshare {\n  ...CodeshareSettingsForm_codeshare\n  ...CodeshareDownloadButton_codeshare\n  createdBy {\n    user {\n      ...isCodeshareProSubscriber_user\n      id\n    }\n  }\n}\n\nfragment CodeshareTabSizeFormField_codeshare on Codeshare {\n  ...useCodeshareTabSize_codeshare\n  canEdit {\n    me\n    userIds\n  }\n}\n\nfragment CodeshareTitleFormField_codeshare on Codeshare {\n  ...useCodeshareTitle_codeshare\n  canEdit {\n    me\n    userIds\n  }\n}\n\nfragment CodeshareViewOnlyCheckbox_codeshare on Codeshare {\n  id\n  createdBy {\n    me\n    userId\n    user {\n      id\n      name\n    }\n  }\n  ...isCodeshareViewOnly_codeshare\n}\n\nfragment LoginForm_codeshare on Codeshare {\n  id\n  createdBy {\n    userId\n    me\n  }\n  modifiedBy {\n    userId\n    me\n  }\n  canEdit {\n    userIds\n    me\n  }\n}\n\nfragment LoginRegisterModal_codeshare on Codeshare {\n  id\n  createdBy {\n    me\n    user {\n      anonymous\n      id\n    }\n  }\n  ...LoginForm_codeshare\n  ...RegisterForm_codeshare\n}\n\nfragment NagModal_codeshare on Codeshare {\n  ...LoginRegisterModal_codeshare\n  createdBy {\n    me\n    user {\n      ...isCodeshareProSubscriber_user\n      id\n    }\n  }\n}\n\nfragment RegisterForm_codeshare on Codeshare {\n  id\n  createdBy {\n    userId\n    me\n  }\n  modifiedBy {\n    userId\n    me\n  }\n  canEdit {\n    userIds\n    me\n  }\n}\n\nfragment isCodeshareProSubscriber_user on User {\n  subscriptionPlans(first: 100) {\n    edges {\n      node {\n        isActive\n        planId\n        id\n      }\n    }\n  }\n}\n\nfragment isCodeshareViewOnly_codeshare on Codeshare {\n  canEdit {\n    userIds\n  }\n}\n\nfragment refetchableCodeHistoryEdges_codeshare on Codeshare {\n  id\n  createdBy {\n    userId\n    me\n  }\n  codeCheckpoint {\n    codeHistoryId\n    value\n    codeHistoryEdge {\n      node {\n        id\n        historyId\n        value\n        createdAt\n        createdBy {\n          me\n          userId\n          clientId\n        }\n      }\n      cursor\n    }\n  }\n  codeHistory(after: $codeHistoryAfter, first: $codeHistoryFirst) {\n    edges {\n      node {\n        id\n        historyId\n        value\n        createdAt\n        createdBy {\n          me\n          userId\n          clientId\n        }\n        __typename\n      }\n      cursor\n    }\n    pageInfo {\n      endCursor\n      hasNextPage\n    }\n  }\n}\n\nfragment refetchableCodeshareUserEdges_codeshare on Codeshare {\n  id\n  createdBy {\n    userId\n    me\n  }\n  users(first: $codeshareUsersFirst, after: $codeshareUsersAfter) {\n    edges {\n      node {\n        id\n        createdAt\n        modifiedAt\n        createdBy {\n          userId\n          me\n        }\n        color\n        cursor {\n          position\n          selectionEnd\n        }\n        __typename\n      }\n      cursor\n    }\n    pageInfo {\n      endCursor\n      hasNextPage\n    }\n  }\n}\n\nfragment useCodeshareCodeHistories_codeshare on Codeshare {\n  id\n  ...refetchableCodeHistoryEdges_codeshare\n}\n\nfragment useCodeshareModeName_codeshare on Codeshare {\n  id\n  modeName\n}\n\nfragment useCodeshareTabSize_codeshare on Codeshare {\n  id\n  tabSize\n}\n\nfragment useCodeshareTitle_codeshare on Codeshare {\n  id\n  createdAt\n  title\n}\n\nfragment useCodeshareUsers_codeshare on Codeshare {\n  id\n  ...refetchableCodeshareUserEdges_codeshare\n}\n"}}}();d.hash="2a1999a747b72363294472e7617f4c91";var u=d;const c=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"input"}],n=[{kind:"Variable",name:"input",variableName:"input"}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"CodeshareIdCodeshareSubscription",selections:[{alias:null,args:n,concreteType:"CodeshareUpdatesPayload",kind:"LinkedField",name:"codeshareUpdates",plural:!1,selections:[{alias:null,args:null,concreteType:"Codeshare",kind:"LinkedField",name:"codeshare",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"CodesharePageSubscription_codeshare"}],storageKey:null}],storageKey:null}],type:"Subscription",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"CodeshareIdCodeshareSubscription",selections:[{alias:null,args:n,concreteType:"CodeshareUpdatesPayload",kind:"LinkedField",name:"codeshareUpdates",plural:!1,selections:[{alias:null,args:null,concreteType:"Codeshare",kind:"LinkedField",name:"codeshare",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"createdAt",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},{alias:null,args:null,concreteType:"CanEdit",kind:"LinkedField",name:"canEdit",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"me",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"userIds",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"modeName",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"tabSize",storageKey:null}],storageKey:null}],storageKey:null}]},params:{cacheID:"931d44c0ace0a797bdac70593b1b5eee",id:null,metadata:{},name:"CodeshareIdCodeshareSubscription",operationKind:"subscription",text:"subscription CodeshareIdCodeshareSubscription(\n  $input: CodeshareUpdatesInput!\n) {\n  codeshareUpdates(input: $input) {\n    codeshare {\n      ...CodesharePageSubscription_codeshare\n      id\n    }\n  }\n}\n\nfragment CodeshareModeNameFormField_codeshare on Codeshare {\n  ...useCodeshareModeName_codeshare\n  canEdit {\n    me\n    userIds\n  }\n}\n\nfragment CodesharePageSubscription_codeshare on Codeshare {\n  ...CodeshareSidebarSubscription_codeshare\n}\n\nfragment CodeshareSettingsFormSubscription_codeshare on Codeshare {\n  ...CodeshareTitleFormField_codeshare\n  ...CodeshareModeNameFormField_codeshare\n  ...CodeshareTabSizeFormField_codeshare\n}\n\nfragment CodeshareSidebarSubscription_codeshare on Codeshare {\n  ...CodeshareSettingsFormSubscription_codeshare\n}\n\nfragment CodeshareTabSizeFormField_codeshare on Codeshare {\n  ...useCodeshareTabSize_codeshare\n  canEdit {\n    me\n    userIds\n  }\n}\n\nfragment CodeshareTitleFormField_codeshare on Codeshare {\n  ...useCodeshareTitle_codeshare\n  canEdit {\n    me\n    userIds\n  }\n}\n\nfragment useCodeshareModeName_codeshare on Codeshare {\n  id\n  modeName\n}\n\nfragment useCodeshareTabSize_codeshare on Codeshare {\n  id\n  tabSize\n}\n\nfragment useCodeshareTitle_codeshare on Codeshare {\n  id\n  createdAt\n  title\n}\n"}}}();c.hash="e1ae83afdcb8caac44276dde9b210298";var m=c;const g=function(){var e={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null};return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CodeshareIdMeReconnectQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"CodesharePage_viewer"},{alias:null,args:null,concreteType:"Me",kind:"LinkedField",name:"me",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"CodesharePageSubscription_me"}],storageKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"CodeshareIdMeReconnectQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,concreteType:"Me",kind:"LinkedField",name:"me",plural:!1,selections:[e,{alias:null,args:null,kind:"ScalarField",name:"anonymous",storageKey:null},{alias:null,args:null,concreteType:"UserSettings",kind:"LinkedField",name:"settings",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"theme",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"keymap",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"email",storageKey:null},{alias:null,args:[{kind:"Literal",name:"first",value:100}],concreteType:"SubscriptionPlanConnection",kind:"LinkedField",name:"subscriptionPlans",plural:!1,selections:[{alias:null,args:null,concreteType:"SubscriptionPlanConnectionEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"SubscriptionPlan",kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"isActive",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"planId",storageKey:null},e],storageKey:null}],storageKey:null}],storageKey:"subscriptionPlans(first:100)"}],storageKey:null}],storageKey:null}]},params:{cacheID:"c633264e528daa7f9d228aebfa951242",id:null,metadata:{},name:"CodeshareIdMeReconnectQuery",operationKind:"query",text:"query CodeshareIdMeReconnectQuery {\n  viewer {\n    ...CodesharePage_viewer\n    me {\n      ...CodesharePageSubscription_me\n      id\n    }\n  }\n}\n\nfragment AuthUserNavbar_me on Me {\n  anonymous\n  name\n  email\n  ...Gravatar_me\n}\n\nfragment CodeshareCodeMirror_me on Me {\n  id\n  ...useTheme_me\n  ...useKeymap_me\n}\n\nfragment CodeshareEditor_me on Me {\n  ...CodeshareFirepad_me\n}\n\nfragment CodeshareFirepad_me on Me {\n  id\n  ...CodeshareCodeMirror_me\n}\n\nfragment CodeshareHead_me on Me {\n  ...CodeshareLazyHead_me\n  ...useKeymap_me\n}\n\nfragment CodeshareKeymapFormField_me on Me {\n  ...useKeymap_me\n}\n\nfragment CodeshareLazyHead_me on Me {\n  ...useTheme_me\n}\n\nfragment CodeshareNavbar_me on Me {\n  anonymous\n  ...UserNavbar_me\n  ...CodeshareShareModal_me\n  ...PlansButton_me\n  ...isCodeshareProSubscriber_me\n}\n\nfragment CodesharePageSubscription_me on Me {\n  ...CodeshareSidebarSubscription_me\n}\n\nfragment CodesharePage_viewer on Viewer {\n  me {\n    ...CodeshareHead_me\n    ...CodeshareNavbar_me\n    ...CodeshareEditor_me\n    ...CodeshareSidebar_me\n    ...NagModal_me\n    ...isCodeshareProSubscriber_me\n    ...SponsorAllInOne_me\n    id\n  }\n}\n\nfragment CodesharePlans_me on Me {\n  anonymous\n  ...CodeshareProCheckoutModal_me\n  ...isCodeshareProSubscriber_me\n  ...LoginRegisterModal_me\n}\n\nfragment CodeshareProCheckoutModal_me on Me {\n  ...CodeshareProForm_me\n}\n\nfragment CodeshareProForm_me on Me {\n  id\n  email\n}\n\nfragment CodeshareProModal_me on Me {\n  ...CodesharePlans_me\n}\n\nfragment CodeshareSettingsFormSubscription_me on Me {\n  ...CodeshareThemeFormField_me\n  ...CodeshareKeymapFormField_me\n}\n\nfragment CodeshareSettingsForm_me on Me {\n  anonymous\n  ...CodeshareThemeFormField_me\n  ...CodeshareKeymapFormField_me\n}\n\nfragment CodeshareShareModal_me on Me {\n  ...CodeshareViewOnlyCheckbox_me\n}\n\nfragment CodeshareSidebarSubscription_me on Me {\n  ...CodeshareSettingsFormSubscription_me\n}\n\nfragment CodeshareSidebar_me on Me {\n  ...isCodeshareProSubscriber_me\n  ...CodeshareSettingsForm_me\n}\n\nfragment CodeshareThemeFormField_me on Me {\n  ...useTheme_me\n}\n\nfragment CodeshareViewOnlyCheckbox_me on Me {\n  anonymous\n  ...isCodeshareProSubscriber_me\n  ...CodeshareProModal_me\n}\n\nfragment Gravatar_me on Me {\n  name\n  email\n}\n\nfragment LoginForm_me on Me {\n  id\n}\n\nfragment LoginRegisterModal_me on Me {\n  ...LoginForm_me\n  ...RegisterForm_me\n}\n\nfragment NagModal_me on Me {\n  anonymous\n  ...LoginRegisterModal_me\n}\n\nfragment PlansButton_me on Me {\n  ...CodeshareProModal_me\n}\n\nfragment RegisterForm_me on Me {\n  id\n}\n\nfragment SimpleOptimizeSponsor_me on Me {\n  ...PlansButton_me\n}\n\nfragment SimpleSadFace_me on Me {\n  ...PlansButton_me\n  ...SponsorScriptToast_me\n}\n\nfragment SimpleSponsorFooter_me on Me {\n  ...PlansButton_me\n}\n\nfragment SponsorAllInOne_me on Me {\n  ...SimpleSponsorFooter_me\n  ...SimpleOptimizeSponsor_me\n  ...SimpleSadFace_me\n}\n\nfragment SponsorScriptToast_me on Me {\n  ...PlansButton_me\n}\n\nfragment UserNavbar_me on Me {\n  anonymous\n  ...AuthUserNavbar_me\n}\n\nfragment isCodeshareProSubscriber_me on Me {\n  subscriptionPlans(first: 100) {\n    edges {\n      node {\n        isActive\n        planId\n        id\n      }\n    }\n  }\n}\n\nfragment useKeymap_me on Me {\n  id\n  anonymous\n  settings {\n    keymap\n  }\n}\n\nfragment useTheme_me on Me {\n  id\n  anonymous\n  settings {\n    theme\n  }\n}\n"}}}();g.hash="2ed944020620e7a45ce34fc3ff657089";var h=g;const p=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"input"}],n=[{kind:"Variable",name:"input",variableName:"input"}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"CodeshareIdMeSubscription",selections:[{alias:null,args:n,concreteType:"ViewerResponse",kind:"LinkedField",name:"meUpdates",plural:!1,selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,concreteType:"Me",kind:"LinkedField",name:"me",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"CodesharePageSubscription_me"}],storageKey:null}],storageKey:null}],storageKey:null}],type:"Subscription",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"CodeshareIdMeSubscription",selections:[{alias:null,args:n,concreteType:"ViewerResponse",kind:"LinkedField",name:"meUpdates",plural:!1,selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,concreteType:"Me",kind:"LinkedField",name:"me",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"anonymous",storageKey:null},{alias:null,args:null,concreteType:"UserSettings",kind:"LinkedField",name:"settings",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"theme",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"keymap",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}]},params:{cacheID:"7ca23a65635689b64c914692ac28e0fa",id:null,metadata:{},name:"CodeshareIdMeSubscription",operationKind:"subscription",text:"subscription CodeshareIdMeSubscription(\n  $input: MeUpdatesInput!\n) {\n  meUpdates(input: $input) {\n    viewer {\n      me {\n        ...CodesharePageSubscription_me\n        id\n      }\n    }\n  }\n}\n\nfragment CodeshareKeymapFormField_me on Me {\n  ...useKeymap_me\n}\n\nfragment CodesharePageSubscription_me on Me {\n  ...CodeshareSidebarSubscription_me\n}\n\nfragment CodeshareSettingsFormSubscription_me on Me {\n  ...CodeshareThemeFormField_me\n  ...CodeshareKeymapFormField_me\n}\n\nfragment CodeshareSidebarSubscription_me on Me {\n  ...CodeshareSettingsFormSubscription_me\n}\n\nfragment CodeshareThemeFormField_me on Me {\n  ...useTheme_me\n}\n\nfragment useKeymap_me on Me {\n  id\n  anonymous\n  settings {\n    keymap\n  }\n}\n\nfragment useTheme_me on Me {\n  id\n  anonymous\n  settings {\n    theme\n  }\n}\n"}}}();p.hash="6cdaa35b9eb7396fececbcbf027dc495";var y=p,f=a(53127),C=a(67912),k=a(38631),b=a(50559);const F={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CodesharePageSubscription_codeshare",selections:[{args:null,kind:"FragmentSpread",name:"CodeshareSidebarSubscription_codeshare"}],type:"Codeshare",abstractKey:null,hash:"eb3a72bb3b22014ddc4e4488a9de0087"};var S=F;const v={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CodesharePageSubscription_me",selections:[{args:null,kind:"FragmentSpread",name:"CodeshareSidebarSubscription_me"}],type:"Me",abstractKey:null,hash:"b430bbd4c60741200f9e789f3e11762f"};var _=v;const K={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CodesharePage_codeshare",selections:[{alias:null,args:null,kind:"ScalarField",name:"createdAt",storageKey:null},{alias:null,args:null,concreteType:"CreatedBy",kind:"LinkedField",name:"createdBy",plural:!1,selections:[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"user",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"isCodeshareProSubscriber_user"}],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},{args:null,kind:"FragmentSpread",name:"CodeshareHead_codeshare"},{args:null,kind:"FragmentSpread",name:"CodeshareNavbar_codeshare"},{args:null,kind:"FragmentSpread",name:"CodeshareEditor_codeshare"},{args:null,kind:"FragmentSpread",name:"CodeshareSidebar_codeshare"},{args:null,kind:"FragmentSpread",name:"NagModal_codeshare"}],type:"Codeshare",abstractKey:null,hash:"9cac4687d4737b7cd6f9adca114369c9"};var E=K;const I={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CodesharePage_viewer",selections:[{alias:null,args:null,concreteType:"Me",kind:"LinkedField",name:"me",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"CodeshareHead_me"},{args:null,kind:"FragmentSpread",name:"CodeshareNavbar_me"},{args:null,kind:"FragmentSpread",name:"CodeshareEditor_me"},{args:null,kind:"FragmentSpread",name:"CodeshareSidebar_me"},{args:null,kind:"FragmentSpread",name:"NagModal_me"},{args:null,kind:"FragmentSpread",name:"isCodeshareProSubscriber_me"},{args:null,kind:"FragmentSpread",name:"SponsorAllInOne_me"}],storageKey:null}],type:"Viewer",abstractKey:null,hash:"0ef4f1236c81bfb1a07688486ff08b1b"};var O=I,M=a(67294),L=a(22644);var T=(0,M.createContext)({codeMirror:null,setCodeMirror(){}});const w={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CodeshareEditor_codeshare",selections:[{args:null,kind:"FragmentSpread",name:"CodeshareFirepad_codeshare"}],type:"Codeshare",abstractKey:null,hash:"f2123e9b74d7e78f595327e2ea42c12d"};var D=w;const x={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CodeshareEditor_me",selections:[{args:null,kind:"FragmentSpread",name:"CodeshareFirepad_me"}],type:"Me",abstractKey:null,hash:"bf03c44d9ffbd7498b47fac5d290a5ac"};var A=x,j=a(98152);a(88674),a(83753);const N={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CodeshareFirepad_codeshare",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{args:null,kind:"FragmentSpread",name:"CodeshareCodeMirror_codeshare"},{args:null,kind:"FragmentSpread",name:"useCodeshareCodeHistories_codeshare"},{args:null,kind:"FragmentSpread",name:"useCodeshareUsers_codeshare"},{alias:null,args:null,concreteType:"CanEdit",kind:"LinkedField",name:"canEdit",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"me",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"userIds",storageKey:null}],storageKey:null}],type:"Codeshare",abstractKey:null,hash:"3efd42af1b92b5a5c4d38d39d31a0c6f"};var P=N;const Z={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CodeshareFirepad_me",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{args:null,kind:"FragmentSpread",name:"CodeshareCodeMirror_me"}],type:"Me",abstractKey:null,hash:"d3bfab328f52730239c44e56861deb9f"};var U=Z;a(66992),a(51532),a(33948),a(21249),a(91038);const H={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useCodeshareUsers_codeshare",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{args:null,kind:"FragmentSpread",name:"refetchableCodeshareUserEdges_codeshare"}],type:"Codeshare",abstractKey:null,hash:"513bdbea2543cc4c38d2e51a3423bff8"};var R=H;const B=function(){var e=["users"],n={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},r={alias:null,args:null,concreteType:"CreatedBy",kind:"LinkedField",name:"createdBy",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"userId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"me",storageKey:null}],storageKey:null};return{argumentDefinitions:[{kind:"RootArgument",name:"codeshareUsersAfter"},{kind:"RootArgument",name:"codeshareUsersFirst"}],kind:"Fragment",metadata:{connection:[{count:"codeshareUsersFirst",cursor:"codeshareUsersAfter",direction:"forward",path:e}],refetch:{connection:{forward:{count:"codeshareUsersFirst",cursor:"codeshareUsersAfter"},backward:null,path:e},fragmentPathInResult:["node"],operation:a(66880),identifierField:"id"}},name:"refetchableCodeshareUserEdges_codeshare",selections:[n,r,{alias:"users",args:null,concreteType:"CodeshareUsersConnection",kind:"LinkedField",name:"__Codeshare_users_connection",plural:!1,selections:[{alias:null,args:null,concreteType:"CodeshareUserConnectionEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"CodeshareUser",kind:"LinkedField",name:"node",plural:!1,selections:[n,{alias:null,args:null,kind:"ScalarField",name:"createdAt",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"modifiedAt",storageKey:null},r,{alias:null,args:null,kind:"ScalarField",name:"color",storageKey:null},{alias:null,args:null,concreteType:"CursorType",kind:"LinkedField",name:"cursor",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"position",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"selectionEnd",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cursor",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"PageInfo",kind:"LinkedField",name:"pageInfo",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"endCursor",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"hasNextPage",storageKey:null}],storageKey:null}],storageKey:null}],type:"Codeshare",abstractKey:null}}();B.hash="432679eebdeadeba528b71c43deeea74";var V=B;const z={codeshareUsersFirst:100,codeshareUsersAfter:null};function q(e){const n=(0,C.useRefetchableFragment)(V,e),a=(0,j.Z)(n,2),r=a[0],s=a[1];return[(null===r||void 0===r?void 0:r.users.edges)||[],s]}function $(e,n){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:G;const r=new Map,s=new Map,l=new Map;return e.forEach(((s,t)=>{if(n.has(t)){const r=e.get(t),s=n.get(t);a(r,s)||l.set(t,r)}else r.set(t,s)})),n.forEach(((n,a)=>{e.has(a)||s.set(a,n)})),{created:r,updated:l,deleted:s}}function G(e,n){return e===n}function Q(e,n){const a=new Map;return e.forEach((e=>{const r=n(e);a.set(r,e)})),a}function J(e){if(0!==e.length)return e[e.length-1]}var W=a(92432);const Y=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"input"}],n=[{alias:null,args:[{kind:"Variable",name:"input",variableName:"input"}],concreteType:"DeletionsPayload",kind:"LinkedField",name:"codeshareUserDeletions",plural:!1,selections:[{alias:null,args:null,concreteType:"Codeshare",kind:"LinkedField",name:"codeshare",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"deletedCodeshareUserId",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"onCodeshareUserDeletionsSubscription",selections:n,type:"Subscription",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"onCodeshareUserDeletionsSubscription",selections:n},params:{cacheID:"571e973d0e4a9dfffc33b976c6a65c8f",id:null,metadata:{},name:"onCodeshareUserDeletionsSubscription",operationKind:"subscription",text:"subscription onCodeshareUserDeletionsSubscription(\n  $input: CodeshareUserDeletionsInput!\n) {\n  codeshareUserDeletions(input: $input) {\n    codeshare {\n      id\n    }\n    deletedCodeshareUserId\n  }\n}\n"}}}();Y.hash="7e4d7eb20a63fdc08c4b860162b60a2f";var X=Y,ee=a(22578);function ne(e,n,a){return W.Z.debug("requestSubscription: codeshareUserDeletions",n),(0,ee.requestSubscription)(e,{subscription:X,variables:n,configs:[{type:"NODE_DELETE",parentName:"codeshare",parentID:n.input.codeshareId,connectionName:"users",deletedIDFieldName:"deletedCodeshareUserId"}],onNext(e){null!==a&&void 0!==a&&a.onNext&&a.onNext(e)},onError(e){null!==a&&void 0!==a&&a.onError&&a.onError(e)},onCompleted(){null!==a&&void 0!==a&&a.onCompleted&&a.onCompleted()}})}const ae=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"input"}],n={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},a=[{alias:null,args:[{kind:"Variable",name:"input",variableName:"input"}],concreteType:"UpsertionsPayload",kind:"LinkedField",name:"codeshareUserUpsertions",plural:!1,selections:[{alias:null,args:null,concreteType:"Codeshare",kind:"LinkedField",name:"codeshare",plural:!1,selections:[n],storageKey:null},{alias:null,args:null,concreteType:"CodeshareUserEdge",kind:"LinkedField",name:"upsertedCodeshareUserEdge",plural:!1,selections:[{alias:null,args:null,concreteType:"CodeshareUser",kind:"LinkedField",name:"node",plural:!1,selections:[n,{alias:null,args:null,kind:"ScalarField",name:"createdAt",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"modifiedAt",storageKey:null},{alias:null,args:null,concreteType:"CreatedBy",kind:"LinkedField",name:"createdBy",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"userId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"me",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"color",storageKey:null},{alias:null,args:null,concreteType:"CursorType",kind:"LinkedField",name:"cursor",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"position",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"selectionEnd",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cursor",storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"onCodeshareUserUpsertionsSubscription",selections:a,type:"Subscription",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"onCodeshareUserUpsertionsSubscription",selections:a},params:{cacheID:"9136bfa9286bc5919219e547441aa59f",id:null,metadata:{},name:"onCodeshareUserUpsertionsSubscription",operationKind:"subscription",text:"subscription onCodeshareUserUpsertionsSubscription(\n  $input: CodeshareUserUpsertionsInput!\n) {\n  codeshareUserUpsertions(input: $input) {\n    codeshare {\n      id\n    }\n    upsertedCodeshareUserEdge {\n      node {\n        id\n        createdAt\n        modifiedAt\n        createdBy {\n          userId\n          me\n        }\n        color\n        cursor {\n          position\n          selectionEnd\n        }\n      }\n      cursor\n    }\n  }\n}\n"}}}();ae.hash="047a48aaa6f81d25ede85d775204545c";var re=ae;function se(e,n,a){return W.Z.debug("requestSubscription: codeshareUserUpsertions",n),(0,ee.requestSubscription)(e,{subscription:re,variables:n,configs:[{type:"RANGE_ADD",parentName:"codeshare",parentID:n.input.codeshareId,connectionInfo:[{key:"Codeshare_users",filters:[],rangeBehavior:"append"}],edgeName:"upsertedCodeshareUserEdge"}],onNext(e){null!==a&&void 0!==a&&a.onNext&&a.onNext(e)},onError(e){null!==a&&void 0!==a&&a.onError&&a.onError(e)},onCompleted(){null!==a&&void 0!==a&&a.onCompleted&&a.onCompleted()}})}var le=a(51726),te=a(34555);function oe(e){b.Z.assert(te.Z,"onReconnect should only be used on clientside");return{dispose:(0,le.i)().on("reconnected",e)}}a(92222),a(65069),a(32099);var ie=a(44311),de=a(55709),ue=a(74825),ce=a(47746);var me=a(92772),ge=a(46766),he=a.n(ge);function pe(e,n){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),a.push.apply(a,r)}return a}function ye(e){for(var n=1;n<arguments.length;n++){var a=null!=arguments[n]?arguments[n]:{};n%2?pe(Object(a),!0).forEach((function(n){(0,r.Z)(e,n,a[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):pe(Object(a)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))}))}return e}const fe=new class{constructor(){(0,r.Z)(this,"store",new Map),(0,r.Z)(this,"timers",new Map)}set(e,n){return this.clearExpiration(e),this.store.set(e,n),n}get(e){return this.store.get(e)}delete(e){return this.clearExpiration(e),this.store.delete(e)}setWithExpiration(e,n,a){this.set(e,n),this.setExpiration(e,a)}setExpiration(e,n){const a=setTimeout((()=>this.delete(e)),n);this.timers.set(e,a)}clearExpiration(e){const n=this.timers.get(e);n&&(clearTimeout(n),this.timers.delete(e))}};function Ce(e,n){return(0,ie.applyOptimisticMutation)(e,ye({},n))}function ke(e,n,a){const r=a.mutation.default?a.mutation.default:a.mutation,s="".concat(r.operation.kind,":").concat(r.operation.name);let l=fe.get(s)||{},t=l.source,o=l.observable,i=l.subscription,d=l.optimisticDisposables,u=void 0===d?[]:d;return null!=o&&null!=t&&null!=i||(t=new(he()),o=t.pipe((0,de.U)((e=>{const n=e.environment,a=e.config;return null==a.optimisticResponse&&null==a.optimisticUpdater||(u=u.concat((0,ie.applyOptimisticMutation)(n,ye({},a)))),ye(ye({},e),{},{optimisticDisposables:u})})),(0,ue.p)(n,void 0,{leading:!1,trailing:!0}),(0,ce.zg)((e=>{let n=e.environment,a=e.config,r=e.optimisticDisposables;return W.Z.debug("throttledCommitMutation: mergeMap",{config:a}),new me.y((e=>{let s=(0,ie.commitMutation)(n,ye(ye({},a),{},{onError(n){W.Z.error("throttledCommitMutation: mergeMap: onError",{config:a,error:n}),r.reverse().forEach((e=>e.dispose())),a.onError&&a.onError(n),e.error(n)},onCompleted(n,r){W.Z.debug("throttledCommitMutation: mergeMap: onCompleted",{config:a,response:n,errors:r}),a.onCompleted&&a.onCompleted(n,r),s=null,e.complete()}}));return()=>{var e;W.Z.warn("throttledCommitMutation: mergeMap: cancel",{}),null===(e=s)||void 0===e||e.dispose()}}))}))),i=o.subscribe()),fe.setWithExpiration(s,{source:t,observable:o,subscription:i,optimisticDisposables:u},n),t.next({environment:e,config:a,duration:n}),{dispose:()=>{W.Z.warn("throttledCommitMutation: dispose",{}),i.unsubscribe()}}}const be=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"input"}],n={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},a=[{alias:null,args:[{kind:"Variable",name:"input",variableName:"input"}],concreteType:"UpsertMeIntoCodeshareUsersResponse",kind:"LinkedField",name:"upsertMeIntoCodeshareUsers",plural:!1,selections:[{alias:null,args:null,concreteType:"Codeshare",kind:"LinkedField",name:"codeshare",plural:!1,selections:[n],storageKey:null},{alias:null,args:null,concreteType:"CodeshareUserEdge",kind:"LinkedField",name:"codeshareUserEdge",plural:!1,selections:[{alias:null,args:null,concreteType:"CodeshareUser",kind:"LinkedField",name:"node",plural:!1,selections:[n,{alias:null,args:null,kind:"ScalarField",name:"createdAt",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"modifiedAt",storageKey:null},{alias:null,args:null,concreteType:"CreatedBy",kind:"LinkedField",name:"createdBy",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"userId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"me",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"color",storageKey:null},{alias:null,args:null,concreteType:"CursorType",kind:"LinkedField",name:"cursor",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"position",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"selectionEnd",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cursor",storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"upsertMeIntoCodeshareUsersMutation",selections:a,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"upsertMeIntoCodeshareUsersMutation",selections:a},params:{cacheID:"c3c2d5b715039028b828435c73f93269",id:null,metadata:{},name:"upsertMeIntoCodeshareUsersMutation",operationKind:"mutation",text:"mutation upsertMeIntoCodeshareUsersMutation(\n  $input: UpsertMeIntoCodeshareUsersInput!\n) {\n  upsertMeIntoCodeshareUsers(input: $input) {\n    codeshare {\n      id\n    }\n    codeshareUserEdge {\n      node {\n        id\n        createdAt\n        modifiedAt\n        createdBy {\n          userId\n          me\n        }\n        color\n        cursor {\n          position\n          selectionEnd\n        }\n      }\n      cursor\n    }\n  }\n}\n"}}}();be.hash="4eaf409387e508a95ddbc50f22ad998b";var Fe=be;function Se(e,n){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),a.push.apply(a,r)}return a}function ve(e){for(var n=1;n<arguments.length;n++){var a=null!=arguments[n]?arguments[n]:{};n%2?Se(Object(a),!0).forEach((function(n){(0,r.Z)(e,n,a[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Se(Object(a)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))}))}return e}function _e(){}function Ke(e){const n=new Date(Date.now()-9e5);return W.Z.debug("isActive",{modifiedAt:new Date(e.node.modifiedAt),expiredDate:n,isActive:new Date(e.node.modifiedAt).valueOf()>n.valueOf()}),new Date(e.node.modifiedAt).valueOf()>n.valueOf()}const Ee={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CodeshareCodeMirror_codeshare",selections:[{args:null,kind:"FragmentSpread",name:"useCodeshareModeName_codeshare"},{args:null,kind:"FragmentSpread",name:"useCodeshareTabSize_codeshare"},{args:null,kind:"FragmentSpread",name:"CodeMirrorCursor_codeshare"},{alias:null,args:null,concreteType:"CanEdit",kind:"LinkedField",name:"canEdit",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"me",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"userIds",storageKey:null}],storageKey:null}],type:"Codeshare",abstractKey:null,hash:"1ec06678de7a49a8b4c3b3ee76357e32"};var Ie=Ee;const Oe={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CodeshareCodeMirror_me",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{args:null,kind:"FragmentSpread",name:"useTheme_me"},{args:null,kind:"FragmentSpread",name:"useKeymap_me"}],type:"Me",abstractKey:null,hash:"3291f3b574214a824f3c21b6ac74e502"};var Me=Oe;const Le={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CodeMirrorCursor_codeshare",selections:[{alias:null,args:null,concreteType:"CanEdit",kind:"LinkedField",name:"canEdit",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"me",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"userIds",storageKey:null}],storageKey:null}],type:"Codeshare",abstractKey:null,hash:"eb2663a0e4e893f83c79b3a042dc1936"};var Te=Le,we=a(40154);function De(e){b.Z.assert(te.Z,"onDisconnect should only be used on clientside");return{dispose:(0,le.i)().on("disconnected",e)}}var xe=a(85893);function Ae(){const e=(0,M.useState)(!1),n=e[0],a=e[1],r=(0,M.useState)(!1),s=r[0],l=r[1];function t(){if(window.location.reload)return window.location.reload();window.location.href=window.location.href}return(0,M.useEffect)((()=>{let e=null;const n=De((()=>{e=setTimeout((()=>{e=null;(0,le.i)().closedByUser?l(!0):a(!0)}),5e3)})),r=oe((()=>{null!=e&&clearTimeout(e),a(!1)}));return()=>{null!=e&&clearTimeout(e),n.dispose(),r.dispose()}}),[]),s?(0,xe.jsx)("div",{onClick:()=>t(),className:"toast toast-info toast-disconnect clickable",children:"Disconnected. Click here to refresh."}):n?(0,xe.jsx)("div",{onClick:()=>{if(s)t();else try{(0,we.Z)()}catch(e){t()}},className:"toast toast-info toast-disconnect clickable",children:"Reconnecting..."}):null}var je=a(81244);const Ne={readOnly:"nocursor"};function Pe(e){var n,a;const r=e.codeMirror,s=(0,M.useState)(null),l=s[0],t=s[1],o=(0,C.useFragment)(Te,e.codeshare),i=(0,M.useState)(!1),d=i[0],u=i[1];return(0,M.useEffect)((()=>{let e=null;const n=De((()=>{e=setTimeout((()=>{e=null,u(!0)}),5e3)})),a=oe((()=>{null!=e&&clearTimeout(e),u(!1)}));return()=>{null!=e&&clearTimeout(e),n.dispose(),a.dispose()}}),[]),(0,M.useEffect)((()=>{if(!r)return;const e=()=>{var e;if(!r)return;if(null!==(e=o.canEdit)&&void 0!==e&&e.me)return;r.setOption("cursorBlinkRate",0),r.setOption("cursorHeight",1),l&&clearTimeout(l);const n=setTimeout((()=>{t(null),r.setOption("cursorHeight",0)}),3e3);t(n)};return r.on("cursorActivity",e),()=>{r.off("cursorActivity",e)}}),[r,null===(n=o.canEdit)||void 0===n?void 0:n.me]),(0,M.useEffect)((()=>{var e;if(r)return null!==(e=o.canEdit)&&void 0!==e&&e.me&&!d?(r.setOption("readOnly",!1),r.setOption("cursorBlinkRate",je.Z.cursorBlinkRate),r.setOption("cursorHeight",1)):(r.setOption("readOnly",!0),r.setOption("cursorBlinkRate",-1),r.setOption("cursorHeight",0)),()=>{r.setOption("readOnly",Ne.readOnly)}}),[r,null===(a=o.canEdit)||void 0===a?void 0:a.me,d]),(0,M.useEffect)((()=>{null===r||void 0===r||r.focus()}),[r]),null}a(47042),a(15306);var Ze=a(94294),Ue=a(53028),He=a(26470),Re=a.n(He);var Be=new class{constructor(e){(0,r.Z)(this,"baseUrl",void 0),(0,r.Z)(this,"loadmodeURL",void 0),(0,r.Z)(this,"root",((e,n)=>this.url("/",e,n))),(0,r.Z)(this,"mode",(e=>"null"===e?null:this.url("mode",e+"/"+e,"min.js"))),(0,r.Z)(this,"addon",((e,n)=>"/"===e.charAt(0)?this.url("/",e.slice(1),n||"js"):this.url("addon",e,n||"js"))),(0,r.Z)(this,"keymap",(e=>this.url("keymap",e,"js"))),(0,r.Z)(this,"theme",(e=>this.url("theme",e,"css"))),this.baseUrl=e,this.loadmodeURL=this.url("mode","%N/%N","js")}firepadCSS(){return"//cdn.firebase.com/libs/firepad/1.1.1/firepad.css"}firepadJS(){return(0,Ze.Z)("js/firepad.js")}url(e,n,a){e=e.replace(/^\//,"");var r=Re().join(e,n);return"/"===r[0]&&(r=r.slice(1)),a&&(r+=(Ue.Z||"css"===a?".":".min.")+a),r=r.replace(/\.min\.min/,".min"),this.baseUrl+r}}("https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.53.2/");var Ve=a(62185),ze=a(91629);const qe=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"input"}],n=[{alias:null,args:[{kind:"Variable",name:"input",variableName:"input"}],concreteType:"UpdateCodeshareResponse",kind:"LinkedField",name:"updateCodeshare",plural:!1,selections:[{alias:null,args:null,concreteType:"Codeshare",kind:"LinkedField",name:"codeshare",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"modeName",storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"useCodeshareModeNameMutation",selections:n,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"useCodeshareModeNameMutation",selections:n},params:{cacheID:"25f94cda314e3915b03c2f36f54ebd94",id:null,metadata:{},name:"useCodeshareModeNameMutation",operationKind:"mutation",text:"mutation useCodeshareModeNameMutation(\n  $input: UpdateCodeshareInput!\n) {\n  updateCodeshare(input: $input) {\n    codeshare {\n      id\n      modeName\n    }\n  }\n}\n"}}}();qe.hash="febc74741a259b39be34cd9300e62f59";var $e=qe;const Ge={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useCodeshareModeName_codeshare",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"modeName",storageKey:null}],type:"Codeshare",abstractKey:null,hash:"7de49cd8ff8d33d694727fab6ca32186"};var Qe=Ge;function Je(e){const n=(0,C.useRelayEnvironment)(),a=(0,C.useFragment)(Qe,e);return[(0,Ve.BL)(a.modeName).name||je.Z.modeName,function(e){ke(n,500,{mutation:$e,variables:{input:{id:a.id,modeName:e.toLowerCase()}},optimisticResponse:{updateCodeshare:{codeshare:{id:a.id,modeName:e.toLowerCase()}}}})}]}const We=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"input"}],n=[{alias:null,args:[{kind:"Variable",name:"input",variableName:"input"}],concreteType:"UpdateCodeshareResponse",kind:"LinkedField",name:"updateCodeshare",plural:!1,selections:[{alias:null,args:null,concreteType:"Codeshare",kind:"LinkedField",name:"codeshare",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"tabSize",storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"useCodeshareTabSizeMutation",selections:n,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"useCodeshareTabSizeMutation",selections:n},params:{cacheID:"36d614c08dab22204db872fe8d1fae14",id:null,metadata:{},name:"useCodeshareTabSizeMutation",operationKind:"mutation",text:"mutation useCodeshareTabSizeMutation(\n  $input: UpdateCodeshareInput!\n) {\n  updateCodeshare(input: $input) {\n    codeshare {\n      id\n      tabSize\n    }\n  }\n}\n"}}}();We.hash="90088fad605de50b460743b7d808bc2a";var Ye=We;const Xe={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useCodeshareTabSize_codeshare",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"tabSize",storageKey:null}],type:"Codeshare",abstractKey:null,hash:"77e1232b25a84f949ec8bdb1cf2b0d7e"};var en=Xe;function nn(e){const n=(0,C.useRelayEnvironment)(),a=(0,C.useFragment)(en,e);return[a.tabSize||je.Z.tabSize,function(e){ke(n,500,{mutation:Ye,variables:{input:{id:a.id,tabSize:e}},optimisticResponse:{updateCodeshare:{codeshare:{id:a.id,tabSize:e}}}})}]}const an=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"input"}],n=[{alias:null,args:[{kind:"Variable",name:"input",variableName:"input"}],concreteType:"ViewerResponse",kind:"LinkedField",name:"updateMe",plural:!1,selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,concreteType:"Me",kind:"LinkedField",name:"me",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,concreteType:"UserSettings",kind:"LinkedField",name:"settings",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"keymap",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"useKeymapMutation",selections:n,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"useKeymapMutation",selections:n},params:{cacheID:"4df1f246be12960a2e354c6d1b98528a",id:null,metadata:{},name:"useKeymapMutation",operationKind:"mutation",text:"mutation useKeymapMutation(\n  $input: UpdateMeInput!\n) {\n  updateMe(input: $input) {\n    viewer {\n      me {\n        id\n        settings {\n          keymap\n        }\n      }\n    }\n  }\n}\n"}}}();an.hash="bd317611258d3ae07c2b711aec373f0a";var rn=an;const sn={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useKeymap_me",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"anonymous",storageKey:null},{alias:null,args:null,concreteType:"UserSettings",kind:"LinkedField",name:"settings",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"keymap",storageKey:null}],storageKey:null}],type:"Me",abstractKey:null,hash:"264b0c91d594ab22e67145233babfb05"};var ln=sn,tn=a(6161);function on(e){const n=(0,C.useRelayEnvironment)(),a=(0,C.useFragment)(ln,e);return[a.anonymous?a.settings.keymap||new tn.Z(a.id).getKeymap()||je.Z.keymap:a.settings.keymap||je.Z.keymap,function(e){const r={mutation:rn,variables:{input:{settings:{keymap:e}}},optimisticResponse:{updateMe:{viewer:{me:{id:a.id,settings:{keymap:e}}}}}};a.anonymous?(Ce(n,r),new tn.Z(a.id).setKeymap(e)):ke(n,500,r)}]}const dn=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"input"}],n=[{alias:null,args:[{kind:"Variable",name:"input",variableName:"input"}],concreteType:"ViewerResponse",kind:"LinkedField",name:"updateMe",plural:!1,selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,concreteType:"Me",kind:"LinkedField",name:"me",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,concreteType:"UserSettings",kind:"LinkedField",name:"settings",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"theme",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"useThemeMutation",selections:n,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"useThemeMutation",selections:n},params:{cacheID:"d85caecc042d5d270267a51898eb6f6f",id:null,metadata:{},name:"useThemeMutation",operationKind:"mutation",text:"mutation useThemeMutation(\n  $input: UpdateMeInput!\n) {\n  updateMe(input: $input) {\n    viewer {\n      me {\n        id\n        settings {\n          theme\n        }\n      }\n    }\n  }\n}\n"}}}();dn.hash="703845230823301ccf742e028cd83b65";var un=dn;const cn={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useTheme_me",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"anonymous",storageKey:null},{alias:null,args:null,concreteType:"UserSettings",kind:"LinkedField",name:"settings",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"theme",storageKey:null}],storageKey:null}],type:"Me",abstractKey:null,hash:"f2680c75c266f3207f639761a5180533"};var mn=cn;function gn(e){const n=(0,C.useRelayEnvironment)(),a=(0,C.useFragment)(mn,e);return[a.anonymous?a.settings.theme||new tn.Z(a.id).getTheme()||je.Z.theme:a.settings.theme||je.Z.theme,function(e){const r={mutation:un,variables:{input:{settings:{theme:e}}},optimisticResponse:{updateMe:{viewer:{me:{id:a.id,settings:{theme:e}}}}}};a.anonymous?(Ce(n,r),new tn.Z(a.id).setTheme(e)):ke(n,500,r)}]}function hn(e,n){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),a.push.apply(a,r)}return a}var pn=(0,M.forwardRef)((function(e,n){const s=(0,M.useRef)(null),l=(0,M.useState)(null),t=l[0],o=l[1],i=(0,M.useState)(!1),d=i[0],u=i[1],c=(0,M.useContext)(T).setCodeMirror,m=(0,C.useFragment)(Me,e.me),g=(0,C.useFragment)(Ie,e.codeshare),h=on(m),p=(0,j.Z)(h,1)[0],y=Je(g),f=(0,j.Z)(y,1)[0],k=nn(g),b=(0,j.Z)(k,1)[0],F=gn(m),S=(0,j.Z)(F,1)[0],v=(0,Ve.BL)(f);return(0,M.useImperativeHandle)(n,(()=>t),[t]),(0,M.useEffect)((()=>{if(t)return;if(!s.current)return;const e=window.CodeMirror=a(4631);a(52539),a(88386),a(21994),a(40790),a(87093),a(77269),a(23412),a(82585),a(73986);const n=s.current,l=function(e){const n={};for(let a in e)null!=e[a]&&(n[a]=e[a]);return n}(function(e){for(var n=1;n<arguments.length;n++){var a=null!=arguments[n]?arguments[n]:{};n%2?hn(Object(a),!0).forEach((function(n){(0,r.Z)(e,n,a[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):hn(Object(a)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))}))}return e}({cursorBlinkRate:g.canEdit.me?je.Z.cursorBlinkRate:-1,cursorHeight:1,indentWithTabs:!1,keyMap:p,lineNumbers:!0,mode:(0,ze.vt)(v).mime,tabSize:parseInt(b,10),theme:S},Ne));W.Z.debug("MODE "+(0,ze.vt)(v).mime);const i=e(n,l);e.modeURL=Be.loadmodeURL,e.autoLoadMode(i,v.mode),W.Z.debug("INIT CODEMIRROR"),W.Z.debug("CODEMIRROR ID "+e.ID),Ue.Z,o(i),c(i)}),[s.current]),(0,M.useEffect)((()=>{const n=()=>u(!0);return e.emitter.on("ready",n),()=>{e.emitter.off("ready",n)}}),[t]),(0,M.useEffect)((()=>null===t||void 0===t?void 0:t.setOption("keyMap",p)),[p]),(0,M.useEffect)((()=>{if(!window.CodeMirror)return;if(!t)return;const e=window.CodeMirror;W.Z.debug("MODE "+(0,ze.vt)(v).mime),null===t||void 0===t||t.setOption("mode",(0,ze.vt)(v).mime),e.modeURL=Be.loadmodeURL,e.autoLoadMode(t,v.mode)}),[v]),(0,M.useEffect)((()=>null===t||void 0===t?void 0:t.setOption("tabSize",parseInt(b,10))),[b]),(0,M.useEffect)((()=>null===t||void 0===t?void 0:t.setOption("theme",S)),[S]),(0,xe.jsxs)(M.Fragment,{children:[(0,xe.jsx)("div",{id:e.id,ref:s}),d?(0,xe.jsx)(Pe,{codeMirror:t,codeshare:g,refetching:e.refetching}):null]})}));a(70189);class yn extends class{constructor(){(0,r.Z)(this,"listenersByEvent",new Map)}on(e,n){const a=this.listenersByEvent.get(e)||new Set;a.add(n),this.listenersByEvent.set(e,a)}off(e,n){const a=this.listenersByEvent.get(e);a&&(a.delete(n),0===a.size&&this.listenersByEvent.delete(e))}emit(e){for(var n=arguments.length,a=new Array(n>1?n-1:0),r=1;r<n;r++)a[r-1]=arguments[r];const s=this.listenersByEvent.get(e);s&&s.forEach((e=>e.apply(this,a)))}}{constructor(){super(...arguments),(0,r.Z)(this,"queueByEvent",[]),(0,r.Z)(this,"ready",!1)}emit(e){const n=this;for(var a=arguments.length,r=new Array(a>1?a-1:0),s=1;s<a;s++)r[s-1]=arguments[s];if(!this.ready)return"operation"===e?(W.Z.debug("FirepadEmitter emit",{event:e,args:r}),void super.emit(e,...r)):"ready"===e?(this.ready=!0,W.Z.debug("FirepadEmitter emit",{event:e,args:r}),super.emit(e,...r),void setTimeout((()=>{for(;n.queueByEvent.length;){const e=n.queueByEvent.pop(),a=(0,j.Z)(e,2),r=a[0],s=a[1];super.emit(r,...s)}}),0)):void this.queueByEvent.push([e,r]);W.Z.debug("FirepadEmitter emit",{event:e,args:r}),super.emit(e,...r)}}var fn=a(8726),Cn=a.n(fn),kn=e=>{let n=e.doc,a=e.emitter,r=e.handleCodeHistoryEdge,s=e.receivedCodeHistoryEdges,l=e.refCodeshare,t=e.sendTextOp,o=e.sentTextOps,i=e.upsertMe;return function(e,d,u){let c=u;function m(){return l.current}const g={sendCursorDisposable:null,sendTextOpDisposable:null,getDocument:()=>n,isHistoryEmpty:()=>Boolean(null===s||void 0===s?void 0:s.size)||!1,registerCallbacks(e){for(var n in e)a.on(n,e[n])},setColor(e){c=e},setUserId(){},sendCursor(e){m().canEdit.me&&(this.sendCursorDisposable=i({color:c,cursor:e},{onError:e=>{W.Z.error("sendCursor: error",e),this.sendCursorDisposable=null},onCompleted:()=>{this.sendCursorDisposable=null}}))},sendOperation(e,a){if(!n)return;if(!m().canEdit.me)return;const l=s.nextHistoryId(),i=(0,j.Z)(l,2),d=i[0],u=i[1];W.Z.debug("sendOperation: start "+d,{op:e,doc:n});const c=()=>{W.Z.debug("sendOperation: transaction: start "+d,{op:e,doc:n}),o.set(u,e),this.sendTextOpDisposable=t(d,e,{onError:r=>{if(W.Z.warn("sendOperation: transaction: error "+d,{err:r,op:e,doc:n}),this.sendTextOpDisposable=null,/timed out/i.test(r.message))return W.Z.warn("sendOperation: retryable error",r),void c();/rate limit/i.test(r.message)&&(W.Z.error("sendOperation: rate limit error",r),alert("rate limit exceeded!")),W.Z.error("sendOperation: error",r),a&&a(null,!1)},onCompleted:(s,l)=>{if(this.sendTextOpDisposable=null,l||!s.createCodeHistory)return W.Z.error("sendOperation: transaction: response errors "+d,{response:s,errors:l,op:e,doc:n}),void(a&&a(null,!1));W.Z.debug("sendOperation: transaction: response success "+d,{response:s,op:e,doc:n}),r(s.createCodeHistory.newCodeHistoryEdge,u),W.Z.debug("sendOperation: end "+d,{op:e,doc:n}),a&&a(null,!0)}})};c()},on(e,n){a.on(e,n)},trigger(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];a.emit(e,...r)},dispose(){var e,n;null===(e=this.sendCursorDisposable)||void 0===e||e.dispose(),null===(n=this.sendTextOpDisposable)||void 0===n||n.dispose()}};return g.setColor(c),g.sendCursor(null),g}};class bn extends Map{}class Fn extends b.Z{}function Sn(e,n){b.Z.assert(te.Z,"composeTextOp can only be used in the browser");try{return e.compose(n)}catch(a){throw Fn.wrap(a,"invalid text op",{doc:e,textOp:n})}}var vn=a(19920),_n=a.n(vn);class Kn extends b.Z{}function En(){return(En=(0,s.Z)(t().mark((function e(n){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return 0,e.abrupt("return",In(0,n));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function In(e,n){return On.apply(this,arguments)}function On(){return(On=(0,s.Z)(t().mark((function e(n,a){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.abrupt("return",a((e=>Promise.reject(Kn.wrap(e,"retryable")))));case 4:if(e.prev=4,e.t0=e.catch(0),e.t0 instanceof Kn){e.next=8;break}throw e.t0;case 8:return e.next=10,_n()(1e3*Math.pow(2,n));case 10:return e.abrupt("return",In(n+1,a));case 11:case"end":return e.stop()}}),e,null,[[0,4]])})))).apply(this,arguments)}var Mn=a(42195),Ln=a.n(Mn);class Tn extends b.Z{}function wn(e){b.Z.assert(te.Z,"parseTextOp can only be used in the browser");try{return Cn().TextOperation.fromJSON(e)}catch(n){throw Tn.wrap(n,"invalid text op",{json:e})}}var Dn=a(6492);const xn={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useCodeshareCodeHistories_codeshare",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{args:null,kind:"FragmentSpread",name:"refetchableCodeHistoryEdges_codeshare"}],type:"Codeshare",abstractKey:null,hash:"559878d3383800802d431e54ba6535bb"};var An=xn;const jn=function(){var e=["codeHistory"],n={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"userId",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"me",storageKey:null},l={alias:null,args:null,kind:"ScalarField",name:"value",storageKey:null},t={alias:null,args:null,kind:"ScalarField",name:"historyId",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"createdAt",storageKey:null},i={alias:null,args:null,concreteType:"CreatedBy",kind:"LinkedField",name:"createdBy",plural:!1,selections:[s,r,{alias:null,args:null,kind:"ScalarField",name:"clientId",storageKey:null}],storageKey:null},d={alias:null,args:null,kind:"ScalarField",name:"cursor",storageKey:null};return{argumentDefinitions:[{kind:"RootArgument",name:"codeHistoryAfter"},{kind:"RootArgument",name:"codeHistoryFirst"}],kind:"Fragment",metadata:{connection:[{count:"codeHistoryFirst",cursor:"codeHistoryAfter",direction:"forward",path:e}],refetch:{connection:{forward:{count:"codeHistoryFirst",cursor:"codeHistoryAfter"},backward:null,path:e},fragmentPathInResult:["node"],operation:a(57376),identifierField:"id"}},name:"refetchableCodeHistoryEdges_codeshare",selections:[n,{alias:null,args:null,concreteType:"CreatedBy",kind:"LinkedField",name:"createdBy",plural:!1,selections:[r,s],storageKey:null},{alias:null,args:null,concreteType:"CodeCheckpoint",kind:"LinkedField",name:"codeCheckpoint",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"codeHistoryId",storageKey:null},l,{alias:null,args:null,concreteType:"CodeHistoryEdge",kind:"LinkedField",name:"codeHistoryEdge",plural:!1,selections:[{alias:null,args:null,concreteType:"CodeHistory",kind:"LinkedField",name:"node",plural:!1,selections:[n,t,l,o,i],storageKey:null},d],storageKey:null}],storageKey:null},{alias:"codeHistory",args:null,concreteType:"CodeHistoryConnection",kind:"LinkedField",name:"__Codeshare_codeHistory_connection",plural:!1,selections:[{alias:null,args:null,concreteType:"CodeHistoryConnectionEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"CodeHistory",kind:"LinkedField",name:"node",plural:!1,selections:[n,t,l,o,i,{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null},d],storageKey:null},{alias:null,args:null,concreteType:"PageInfo",kind:"LinkedField",name:"pageInfo",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"endCursor",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"hasNextPage",storageKey:null}],storageKey:null}],storageKey:null}],type:"Codeshare",abstractKey:null}}();jn.hash="5480aec223e32374eed87a6905412379";var Nn=jn;const Pn={codeHistoryAfter:null,codeHistoryFirst:1e3};class Zn{constructor(e,n){(0,r.Z)(this,"prev",void 0),(0,r.Z)(this,"next",void 0),(0,r.Z)(this,"value",void 0),this.value=e,this.prev=(null===n||void 0===n?void 0:n.prev)||null,this.next=(null===n||void 0===n?void 0:n.next)||null}}class Un extends class{constructor(e){(0,r.Z)(this,"head",null),e&&(this.head=e)}forEach(e){let n=this.head;for(;n;)e(n),n=n.next}find(e){let n=this.head;for(;n;){var a;if(n=n.next,n&&(null===(a=n)||void 0===a?void 0:a.value)===e)return n}}}{static fromNode(e){let n=e,a=null;for(;n;)a=n,n=n.next;const r=a;for(n=e,a=null;n;)a=n,n=n.prev;return new Un(a,r)}constructor(e,n){super(e),(0,r.Z)(this,"head",null),(0,r.Z)(this,"tail",null),e&&(this.head=e),n&&(this.tail=n)}push(e){if(null==this.head&&null!=this.tail||null==this.tail&&null!=this.head)throw new Error("head xor tail cannot be null");if(null==this.head||null==this.tail)this.head=this.tail=new Zn(e);else if(this.head===this.tail)this.tail=new Zn(e,{prev:this.head}),this.head.next=this.tail;else{const n=this.tail;this.tail=new Zn(e,{prev:this.head}),n.next=this.tail}return this.tail}pop(){if(!this.tail)return null;const e=this.tail;return this.tail=e.prev,e.prev=null,e}clear(){this.head=null,this.tail=null}delete(e){const n=this.find(e);return n&&(n.prev&&(n.prev.next=n.next),n.next&&(n.next.prev=n.prev)),Boolean(n)}}class Hn extends class{constructor(){(0,r.Z)(this,"list",new Un),(0,r.Z)(this,"map",new Map)}clear(){this.list.clear(),this.map.clear()}delete(e){return!!this.has(e)&&(this.list.delete(e),this.map.delete(e))}forEachAfter(e,n){this.getList(e).forEach((e=>{const a=e.value,r=this.get(a);r&&n(r,a)}))}forEach(e){this.list.head&&this.forEachAfter(this.list.head.value,e)}getList(e){if(null==e)return this.list;const n=this.map.get(e);return n?new Un(n.node):new Un}get(e){const n=this.map.get(e);return null===n||void 0===n?void 0:n.value}has(e){return this.map.has(e)}set(e,n){const a=this.list.push(e);return this.map.set(e,{node:a,value:n}),this}get size(){return this.map.size}get head(){return this.list.head}get tail(){return this.list.tail}}{constructor(){super(...arguments),(0,r.Z)(this,"outOfOrder",new Map),(0,r.Z)(this,"last",null)}nextHistoryId(){let e=0;if(this.outOfOrder.size){let n=0;this.outOfOrder.forEach(((e,a)=>{a>n&&(n=a)})),e=n+1}else if(this.tail){e=this.tail.value+1}return[Ln().encodeHistoryIndex(e),e]}forEach(e){null==this.last?super.forEach(((n,a)=>{this.last=a,e(n,a)})):this.forEachAfter(this.last,((n,a)=>{this.last=a,e(n,a)}))}has(e){return null!=this.head&&this.head.value>=e||super.has(e)}set(e,n){if(super.has(e))return this;const a=e-1;if(!(0===this.size)&&!this.has(a))return this.outOfOrder.set(e,n),this;super.set(e,n);let r=e+1,s=this.outOfOrder.get(r);for(;s;)super.set(r,s),this.outOfOrder.delete(r),r++,s=this.outOfOrder.get(r);return this}isOutOfOrder(e){return this.outOfOrder.has(e)}}const Rn=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"input"}],n={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},a=[{alias:null,args:[{kind:"Variable",name:"input",variableName:"input"}],concreteType:"CreateCodeHistoryResponse",kind:"LinkedField",name:"createCodeHistory",plural:!1,selections:[{alias:null,args:null,concreteType:"Codeshare",kind:"LinkedField",name:"codeshare",plural:!1,selections:[n],storageKey:null},{alias:null,args:null,concreteType:"CodeHistoryEdge",kind:"LinkedField",name:"newCodeHistoryEdge",plural:!1,selections:[{alias:null,args:null,concreteType:"CodeHistory",kind:"LinkedField",name:"node",plural:!1,selections:[n,{alias:null,args:null,kind:"ScalarField",name:"codeshareId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"createdAt",storageKey:null},{alias:null,args:null,concreteType:"CreatedBy",kind:"LinkedField",name:"createdBy",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"me",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"userId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"clientId",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"historyId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"value",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cursor",storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"createCodeHistoryMutation",selections:a,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"createCodeHistoryMutation",selections:a},params:{cacheID:"4d2d55434c36e9bdc474081d0f9dd74f",id:null,metadata:{},name:"createCodeHistoryMutation",operationKind:"mutation",text:"mutation createCodeHistoryMutation(\n  $input: CreateCodeHistoryInput!\n) {\n  createCodeHistory(input: $input) {\n    codeshare {\n      id\n    }\n    newCodeHistoryEdge {\n      node {\n        id\n        codeshareId\n        createdAt\n        createdBy {\n          me\n          userId\n          clientId\n        }\n        historyId\n        value\n      }\n      cursor\n    }\n  }\n}\n"}}}();Rn.hash="d8460e699da3d3e3dff197865083443f";var Bn=Rn,Vn=a(73855);const zn=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"input"}],n=[{alias:null,args:[{kind:"Variable",name:"input",variableName:"input"}],concreteType:"CodeHistoryCreationsPayload",kind:"LinkedField",name:"codeHistoryCreations",plural:!1,selections:[{alias:null,args:null,concreteType:"CodeHistoryEdge",kind:"LinkedField",name:"newCodeHistoryEdge",plural:!1,selections:[{alias:null,args:null,concreteType:"CodeHistory",kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"codeshareId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"createdAt",storageKey:null},{alias:null,args:null,concreteType:"CreatedBy",kind:"LinkedField",name:"createdBy",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"me",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"userId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"clientId",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"historyId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"value",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cursor",storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"onCodeHistoryCreationsSubscription",selections:n,type:"Subscription",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"onCodeHistoryCreationsSubscription",selections:n},params:{cacheID:"4d8d5759b54b052238f448ad7a34b4a3",id:null,metadata:{},name:"onCodeHistoryCreationsSubscription",operationKind:"subscription",text:"subscription onCodeHistoryCreationsSubscription(\n  $input: CodeHistoryCreationsInput!\n) {\n  codeHistoryCreations(input: $input) {\n    newCodeHistoryEdge {\n      node {\n        id\n        codeshareId\n        createdAt\n        createdBy {\n          me\n          userId\n          clientId\n        }\n        historyId\n        value\n      }\n      cursor\n    }\n  }\n}\n"}}}();zn.hash="f6d7c029ab638b9d8572870aacf131d9";var qn=zn;function $n(e,n){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),a.push.apply(a,r)}return a}function Gn(e){for(var n=1;n<arguments.length;n++){var a=null!=arguments[n]?arguments[n]:{};n%2?$n(Object(a),!0).forEach((function(n){(0,r.Z)(e,n,a[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):$n(Object(a)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))}))}return e}let Qn=!1;function Jn(e){var n;const a=document.querySelector(".CodeMirror");return!!window.localStorage&&(window.localStorage.backup=null===a||void 0===a||null===(n=a.CodeMirror)||void 0===n?void 0:n.getValue(),!1)}function Wn(e,n){if(Vn.Z)return[new Hn,()=>({dispose:()=>{}})];const a=()=>{},r=n.onNext||a,s=n.onError||a,l=(n.onCompleted,(0,M.useState)(new Hn)[0]),t=(0,C.useRelayEnvironment)(),o=(0,C.useFragment)(An,e),i=function(e){const n=(0,C.useRefetchableFragment)(Nn,e),a=(0,j.Z)(n,2),r=a[0],s=a[1];return[(null===r||void 0===r?void 0:r.codeCheckpoint)||null,(null===r||void 0===r?void 0:r.codeHistory.edges)||[],s]}(o),d=(0,j.Z)(i,3),u=d[0],c=d[1],m=d[2],g=(e,n)=>{if(null==e.node)return;const a=e.node.historyId,s=Ln().decodeHistoryId(a);if(l.has(s))return;if(l.set(s,e),n)return void W.Z.debug("dontCallback code history ".concat(s),{edge:e});if(l.isOutOfOrder(s))return;l.getList(s).forEach((e=>{const n=e.value,a=l.get(n);a&&r(a,n)}))};(0,M.useEffect)((()=>{var e;const n=(null===(e=J(Yn(u,c)))||void 0===e?void 0:e.cursor)||null,a=oe((()=>{m({id:o.id,codeHistoryAfter:n,codeHistoryFirst:1e3},{fetchPolicy:"store-and-network"})}));return()=>a.dispose()}),[o.id,u,c]);const h=(0,M.useRef)(!0);(0,M.useEffect)((()=>{var e;const n=Yn(u,c),a=n.length?n[0]:null;if(l.tail&&null!==a&&void 0!==a&&a.node){l.tail.value,Ln().decodeHistoryId(a.node.historyId);0}n.forEach((e=>g(e,h.current))),h.current&&(h.current=!1);const r=(null===(e=J(n))||void 0===e?void 0:e.cursor)||null,i=function(e,n,a){return W.Z.debug("requestSubscription: codeHistoryCreations",n),(0,ee.requestSubscription)(e,{subscription:qn,variables:n,onNext(e){null!==a&&void 0!==a&&a.onNext&&a.onNext(e)},onError(e){null!==a&&void 0!==a&&a.onError&&a.onError(e)},onCompleted(){null!==a&&void 0!==a&&a.onCompleted&&a.onCompleted()}})}(t,{input:{codeshareId:o.id,after:r}},{onNext(e){var n;const a=null===e||void 0===e||null===(n=e.codeHistoryCreations)||void 0===n?void 0:n.newCodeHistoryEdge;a&&g(a)},onError(e){s(e)}});return()=>{i.dispose()}}),[o.id,null===u||void 0===u?void 0:u.codeHistoryId,c]);return[l,(e,n,a)=>(Qn=!0,(0,ee.commitMutation)(t,Gn(Gn({mutation:Bn,variables:{input:{codeshareId:o.id,historyId:e,value:n.toJSON()}},configs:[{type:"RANGE_ADD",parentName:"codeshare",parentID:o.id,connectionName:"codeHistory",edgeName:"newCodeHistoryEdge",rangeBehaviors:{"":"append"}}]},a),{},{onError(e){Qn=!1,null!==a&&void 0!==a&&a.onError&&a.onError(e)},onCompleted(e,n){Qn=!1,!n&&e.createCodeHistory&&g(e.createCodeHistory.newCodeHistoryEdge,!0),null!==a&&void 0!==a&&a.onCompleted&&a.onCompleted(e,n)}})))]}function Yn(e,n){let a=[],r=null;return e&&(r=Gn(Gn({},e),{},{node:Gn(Gn({},e.codeHistoryEdge.node),{},{value:e.value})}),a.push(r)),a.concat(n)}te.Z&&window.addEventListener("close",(()=>{!1!==Qn&&Jn("This codeshare has unsaved changes. Want to save a copy before exiting?")}));function Xn(e){const n=(0,M.useRef)(te.Z?new(Cn().TextOperation):null),a=(0,M.useState)(null),r=a[0],s=a[1],l=(0,M.useState)(new yn)[0],t=(0,M.useState)(null),o=t[0],i=t[1],d=e=>n.current=e;W.Z.debug("CodeshareFirepad",{doc:n.current,firepad:r});const u=(0,C.useRelayEnvironment)(),c=(0,C.useFragment)(U,e.me),m=(0,C.useFragment)(P,e.codeshare),g=(0,M.useRef)(m);g.current=m;const h=Wn(m,{onNext:_}),p=(0,j.Z)(h,2),y=p[0],f=p[1],k=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{onCodeshareUserCreated:_e,onCodeshareUserUpdated:_e,onCodeshareUserDeleted:_e};const a=(0,C.useRelayEnvironment)(),r=(0,C.useFragment)(R,e),s=q(r),l=(0,j.Z)(s,2),t=l[0],o=l[1],i=(0,M.useRef)([]),d=(0,M.useRef)(new Map);function u(e){const a=e.id,r=d.current.get(a);r&&r.dispose(),n.onCodeshareUserDeleted(a)}function c(e){e.createdBy.me||n.onCodeshareUserUpdated(e)}function m(e){e.createdBy.me||n.onCodeshareUserCreated(e)}(0,M.useEffect)((()=>{const e=oe((()=>{o({id:r.id,codeshareUsersFirst:100},{fetchPolicy:"store-and-network"})}));return()=>e.dispose()}),[r.id]),(0,M.useEffect)((()=>{const e=i.current,n=i.current=t.map((e=>e.node)).filter((e=>null!=e)),a=Q(e,(e=>e.id)),r=$(Q(n,(e=>e.id)),a,((e,n)=>e.id===n.id&&e.modifiedAt===n.modifiedAt));W.Z.debug("useCodeshareUsers deleted "+r.deleted.size,{keys:Array.from(r.deleted.keys())}),W.Z.debug("useCodeshareUsers updated "+r.updated.size,{keys:Array.from(r.updated.keys())}),W.Z.debug("useCodeshareUsers created "+r.created.size,{keys:Array.from(r.created.keys())}),r.deleted.forEach(u),r.updated.forEach(c),r.created.forEach(m)}),[t]),(0,M.useEffect)((()=>{var e;const n=t.filter((e=>null!=e.node)),s=se(a,{input:{codeshareId:r.id,after:null===(e=J(n.filter(Ke)))||void 0===e?void 0:e.cursor}}),l=ne(a,{input:{codeshareId:r.id,currentCodeshareUserIds:n.map((e=>e.node.id))}});return()=>{s.dispose(),l.dispose()}}),[r.id]);return[t,(e,n)=>ke(a,500,ve({mutation:Fe,variables:{input:ve({codeshareId:r.id},e)},configs:[{type:"RANGE_ADD",parentName:"codeshare",parentID:r.id,connectionName:"users",edgeName:"codeshareUserEdge",rangeBehaviors:{"":"prepend"}}]},n))]}(m,{onCodeshareUserCreated:function(e){W.Z.debug("handleCodeshareUserCreated",e),l.emit("cursor",e.createdBy.userId,e.cursor,e.color)},onCodeshareUserUpdated:function(e){W.Z.debug("handleCodeshareUserUpdated",{codeshareUser:e}),l.emit("cursor",e.createdBy.userId,e.cursor,e.color)},onCodeshareUserDeleted:function(e){const n=Ln().decodeRelayId("CodeshareUser",e);W.Z.debug("handleCodeshareUserDeleted",{relayCodeshareUserId:e,userId:n}),l.emit("cursor",n,null)}}),b=(0,j.Z)(k,2),F=(b[0],b[1]),S=(0,M.useState)(new bn)[0];(0,M.useEffect)((()=>{const e=n.current;if(!e)return;if(!o)return;if(r)return;W.Z.debug("createFirepad",{doc:e,firepad:r}),Cn().FirebaseAdapter=kn({doc:e,emitter:l,handleCodeHistoryEdge:_,receivedCodeHistoryEdges:y,refCodeshare:g,sendTextOp:f,sentTextOps:S,upsertMe:F});const a=Cn().fromCodeMirror({push:()=>({key:c.id})},o,{});return s(a),()=>{a.dispose()}}),[o]),(0,M.useEffect)((()=>{r&&function(e){const a=n.current;if(!a)return;W.Z.debug("handleInitialCodeHistoryEdges: start:",{doc:a});let r=a;e.forEach(((e,n)=>{if(null==e.node)return;const s=e.node.historyId;try{r=Sn(r,wn(e.node.value)),W.Z.debug("handleInitialCodeHistoryEdges: compose success: ".concat(s),{doc:a,nextDoc:r})}catch(l){W.Z.error("handleInitialCodeHistoryEdges: compose error: ".concat(s),{err:l,doc:a})}}));const s=n.current;d(r);try{l.emit("operation",r)}catch(t){console.error(t,{prevDoc:s,nextDoc:r})}0===e.size&&(null===o||void 0===o||o.setOption("placeholder","Write or paste code here then share. Anyone you share with will see code as it is typed!"));W.Z.debug("handleInitialCodeHistoryEdges: success:",{doc:a,nextDoc:r}),setTimeout((()=>{W.Z.debug("CodeshareFirepad: ready"),l.emit("ready")}),0)}(y)}),[r,y]);let v=!1;function _(e,a){const r=n.current;if(!r)return;if(null==e.node)return;const s=e.node.historyId;let t;W.Z.debug("handleCodeHistoryEdge: start: ".concat(s),{doc:r});let o=r;try{t=wn(e.node.value),o=Sn(o,t),W.Z.debug("handleCodeHistoryEdge: compose success: ".concat(s),{doc:r,nextDoc:o}),d(o)}catch(c){return void W.Z.error("handleCodeHistoryEdge: compose error: ".concat(s),{err:c,doc:r,nextDoc:o})}if(S.has(a)){var i;const n=e.node;n&&n.createdBy.me&&null!==(i=S.get(a))&&void 0!==i&&i.equals(t)?((v||0!==a&&a%100===0)&&(v=!1,function(e){En.apply(this,arguments)}((e=>new Promise(((a,r)=>(0,ee.commitMutation)(u,{mutation:Dn.Z,variables:{input:{id:m.id,codeCheckpoint:{codeHistoryId:n.id,value:o.toJSON()}}},onError(n){if(/timed out/.test(n.message))return e(n);W.Z.error("saveCheckpointFailed",{err:n}),v=!0,r(n)},onCompleted(){W.Z.debug("saveCheckpointSuccess"),v=!1,a()}}))).catch((e=>{W.Z.error("commit checkpoint error",{codeshareId:m.id,err:e})}))))),W.Z.debug("handleCodeHistoryEdge: ack: "+s),S.delete(a),l.emit("ack")):(W.Z.debug("handleCodeHistoryEdge: retry: "+s),l.emit("operation",t),l.emit("retry"))}else W.Z.debug("handleCodeHistoryEdge: op: "+s),l.emit("operation",t);W.Z.debug("handleCodeHistoryEdge: success: "+s,{doc:r})}return(0,xe.jsx)(M.Fragment,{children:(0,xe.jsx)(pn,{id:e.id,ref:i,codeshare:m,emitter:l,me:c,refetching:e.refetching})})}function ea(e){const n=(0,C.useFragment)(A,e.me),a=(0,C.useFragment)(D,e.codeshare);return(0,xe.jsx)(Xn,{id:"editor",codeshare:a,me:n,refetching:e.refetching})}const na={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CodeshareHead_codeshare",selections:[{args:null,kind:"FragmentSpread",name:"CodeshareLazyHead_codeshare"}],type:"Codeshare",abstractKey:null,hash:"ccef966e26c0c44285c596bfe7f5c9d2"};var aa=na;const ra={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CodeshareHead_me",selections:[{args:null,kind:"FragmentSpread",name:"CodeshareLazyHead_me"},{args:null,kind:"FragmentSpread",name:"useKeymap_me"}],type:"Me",abstractKey:null,hash:"e6091dc2407953e33f1d9110d24f56b2"};var sa=ra;const la={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CodeshareLazyHead_codeshare",selections:[{alias:null,args:null,kind:"ScalarField",name:"createdAt",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null}],type:"Codeshare",abstractKey:null,hash:"35d209d7aaf75310c379810fa84cfc6a"};var ta=la;const oa={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CodeshareLazyHead_me",selections:[{args:null,kind:"FragmentSpread",name:"useTheme_me"}],type:"Me",abstractKey:null,hash:"be892124d65c50a9fd05824e5bc65b17"};var ia=oa,da=a(14559),ua=a(6327);function ca(e){const n=(0,C.useFragment)(ia,e.me),a=(0,C.useFragment)(ta,e.codeshare),r=gn(n),s=(0,j.Z)(r,1)[0],l=(0,M.useRef)(new Set);return l.current.add(s),(0,M.useMemo)((()=>(0,xe.jsxs)(da.Z,{children:[(0,xe.jsx)("title",{children:"".concat((0,ua.Z)(a)," - Codeshare")}),Array.from(l.current).map((e=>(0,xe.jsx)("link",{rel:"stylesheet",href:Be.theme(e)},e)))]})),[l.current.size])}const ma=[["comment/comment",null],["dialog/dialog",null],["comment/continuecomment",{continueComments:{continueLineComment:!1}}],["edit/closebrackets",{autoCloseBrackets:!0}],["edit/closetag",{autoCloseTags:!0}],["edit/matchbrackets",{matchBrackets:!0}],["edit/trailingspace",null],["mode/overlay",null],["search/match-highlighter",{highlightSelectionMatches:!0}],["search/search",null],["search/searchcursor",null]];function ga(e){const n=(0,M.useContext)(T).codeMirror,a=(0,M.useState)(!1),r=a[0],s=a[1],l=(0,C.useFragment)(sa,e.me),t=(0,C.useFragment)(aa,e.codeshare);return(0,M.useEffect)((()=>{if(!n)return;const e=setTimeout((()=>s(!0)),3e3);return()=>clearTimeout(e)}),[n]),(0,xe.jsxs)(M.Fragment,{children:[(0,M.useMemo)((()=>r&&n?n.toggleComment?(0,xe.jsx)(da.Z,{children:ma.map((e=>{let n=(0,j.Z)(e,3),a=n[0];n[1];return n[2]?(0,xe.jsx)("link",{rel:"stylesheet",href:Be.addon(a,"css")},a):null}))},"lazyHead"):(te.Z&&(window.setCodeMirrorOpts=function(e){const a=ma.find((n=>(0,j.Z)(n,1)[0]===e));if(!a)return;const r=(0,j.Z)(a,2),s=(r[0],r[1]);W.Z.debug("SET "+e,s||{}),Object.keys(s).forEach((e=>n.setOption(e,s[e])))}),(0,xe.jsx)(da.Z,{children:ma.map((e=>{let n=(0,j.Z)(e,3),a=n[0],r=n[1];return n[2]?(0,xe.jsx)("link",{rel:"stylesheet",href:Be.addon(a,"css")},a):(0,xe.jsx)("script",{src:Be.addon(a),onLoad:r?"window.setCodeMirrorOpts('".concat(a,"')"):""},a)}))})):null),[n,r]),(0,xe.jsx)(ca,{me:l,codeshare:t})]})}const ha={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CodeshareNavbar_codeshare",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,concreteType:"CreatedBy",kind:"LinkedField",name:"createdBy",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"me",storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"user",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"companyImage",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"createdAt",storageKey:null},{args:null,kind:"FragmentSpread",name:"CodeshareShareButton_codeshare"},{args:null,kind:"FragmentSpread",name:"CodeshareShareModal_codeshare"}],type:"Codeshare",abstractKey:null,hash:"6edba2d07e75ee075e7a42d37033340d"};var pa=ha;const ya={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CodeshareNavbar_me",selections:[{alias:null,args:null,kind:"ScalarField",name:"anonymous",storageKey:null},{args:null,kind:"FragmentSpread",name:"UserNavbar_me"},{args:null,kind:"FragmentSpread",name:"CodeshareShareModal_me"},{args:null,kind:"FragmentSpread",name:"PlansButton_me"},{args:null,kind:"FragmentSpread",name:"isCodeshareProSubscriber_me"}],type:"Me",abstractKey:null,hash:"9e9644bbf9ac840fe799d8a66aa02f12"};var fa=ya,Ca=a(74579),ka=a(44925);const ba={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CodeshareShareButton_codeshare",selections:[{alias:null,args:null,concreteType:"CanEdit",kind:"LinkedField",name:"canEdit",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"me",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"userIds",storageKey:null}],storageKey:null}],type:"Codeshare",abstractKey:null,hash:"cdf89f43964cf890ba394db4a41cf7e3"};var Fa=ba,Sa=a(51436),va=a(67814);const _a=["codeshare"];function Ka(e,n){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),a.push.apply(a,r)}return a}function Ea(e){for(var n=1;n<arguments.length;n++){var a=null!=arguments[n]?arguments[n]:{};n%2?Ka(Object(a),!0).forEach((function(n){(0,r.Z)(e,n,a[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ka(Object(a)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))}))}return e}var Ia=e=>{var n;const a=e.codeshare,r=(0,ka.Z)(e,_a),s=(0,C.useFragment)(Fa,a);return(0,xe.jsxs)(Ca.ZP,Ea(Ea({},r),{},{children:[(0,xe.jsx)(va.G,{icon:null!==(n=s.canEdit)&&void 0!==n&&n.userIds?Sa.byT:Sa.FVb}),"\xa0Share"]}))};const Oa={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CodeshareShareModal_codeshare",selections:[{args:null,kind:"FragmentSpread",name:"CodeshareShareUrl_codeshare"},{args:null,kind:"FragmentSpread",name:"CodeshareViewOnlyCheckbox_codeshare"}],type:"Codeshare",abstractKey:null,hash:"c33dfb6632a168969705d250ba90dc00"};var Ma=Oa;const La={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CodeshareShareModal_me",selections:[{args:null,kind:"FragmentSpread",name:"CodeshareViewOnlyCheckbox_me"}],type:"Me",abstractKey:null,hash:"022238053b34a9330071a2c49f03ea7f"};var Ta=La;const wa={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CodeshareShareUrl_codeshare",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],type:"Codeshare",abstractKey:null,hash:"c3b8e0b16081b3b312e85a5c13aae9f0"};var Da=wa,xa=a(30924),Aa=a(735),ja=a.n(Aa);function Na(e){const n=(0,M.useRef)(null),a=(0,M.useState)(!1),r=a[0],s=a[1],l=(0,C.useFragment)(Da,e.codeshare),t=Ln().decodeRelayId("Codeshare",l.id),o="https://codeshare.io/".concat(t),i=()=>{var e;const a=ja()(o);null===(e=n.current)||void 0===e||e.select(),xa.Z.track("Selected share url"),a?s(!0):W.Z.error("clipboard copy failed")};return(0,M.useEffect)((()=>{if(!r)return;const e=setTimeout((()=>s(!1)),800);return()=>clearTimeout(e)}),[r]),(0,xe.jsxs)("div",{className:"form-field",children:[(0,xe.jsx)("label",{htmlFor:"url",children:"Share this URL"}),(0,xe.jsx)("input",{ref:n,type:"text",name:"url",id:"url",value:o,onClick:i,readOnly:!0}),(0,xe.jsx)(Ca.ZP,{theme:Ca.yU.ICON,hint:Ca.kd.TOP,onClick:i,children:(0,xe.jsx)(va.G,{icon:Sa.kZ_})}),(0,xe.jsx)("span",{className:"copy-success",style:{opacity:r?1:0,transition:"opacity .2s cubic-bezier(.17,.67,.83,.67)"},children:"Copied!"})]})}const Pa=function(){var e={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null};return{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CodeshareViewOnlyCheckbox_codeshare",selections:[e,{alias:null,args:null,concreteType:"CreatedBy",kind:"LinkedField",name:"createdBy",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"me",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"userId",storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"user",plural:!1,selections:[e,{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null}],storageKey:null}],storageKey:null},{args:null,kind:"FragmentSpread",name:"isCodeshareViewOnly_codeshare"}],type:"Codeshare",abstractKey:null}}();Pa.hash="5bb3dfb73cd62eaf5f318b5be1f2fff6";var Za=Pa;const Ua={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CodeshareViewOnlyCheckbox_me",selections:[{alias:null,args:null,kind:"ScalarField",name:"anonymous",storageKey:null},{args:null,kind:"FragmentSpread",name:"isCodeshareProSubscriber_me"},{args:null,kind:"FragmentSpread",name:"CodeshareProModal_me"}],type:"Me",abstractKey:null,hash:"cc14316b70c2dceb5a7984e2b64e6b82"};var Ha=Ua,Ra=a(94184),Ba=a.n(Ra);const Va=["hint","label","name","note","onMouseEnter"];function za(e,n){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),a.push.apply(a,r)}return a}function qa(e){for(var n=1;n<arguments.length;n++){var a=null!=arguments[n]?arguments[n]:{};n%2?za(Object(a),!0).forEach((function(n){(0,r.Z)(e,n,a[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):za(Object(a)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))}))}return e}function $a(e){e.hint,e.label,e.name,e.note,e.onMouseEnter;const n=(0,ka.Z)(e,Va);return(0,xe.jsxs)("div",{className:"form-field",children:[(0,xe.jsx)("label",{htmlFor:e.name,children:e.label}),(0,xe.jsxs)("label",{className:Ba()({switch:!0,"hint--top":null!=e.hint}),onMouseEnter:e.onMouseEnter,"data-hint":e.hint,children:[(0,xe.jsx)("input",qa(qa({},n),{},{type:"checkbox",className:"switch-input"})),(0,xe.jsx)("span",{className:"switch-label","data-on":"On","data-off":"Off"}),(0,xe.jsx)("span",{className:"switch-handle"})]}),e.note?(0,xe.jsx)("p",{className:"note",children:e.note}):null]})}var Ga=a(88575);const Qa={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"isCodeshareViewOnly_codeshare",selections:[{alias:null,args:null,concreteType:"CanEdit",kind:"LinkedField",name:"canEdit",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"userIds",storageKey:null}],storageKey:null}],type:"Codeshare",abstractKey:null,hash:"873602aa31926c022e73c20628d444e0"};var Ja=Qa;const Wa=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"input"}],n=[{alias:null,args:[{kind:"Variable",name:"input",variableName:"input"}],concreteType:"UpdateCodesharePermissionsResponseType",kind:"LinkedField",name:"updateCodesharePermissions",plural:!1,selections:[{alias:null,args:null,concreteType:"Codeshare",kind:"LinkedField",name:"codeshare",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,concreteType:"CanEdit",kind:"LinkedField",name:"canEdit",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"userIds",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"me",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"updateCodesharePermissionsMutation",selections:n,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"updateCodesharePermissionsMutation",selections:n},params:{cacheID:"00a411b92ecb762f89bb9fc3ca09e433",id:null,metadata:{},name:"updateCodesharePermissionsMutation",operationKind:"mutation",text:"mutation updateCodesharePermissionsMutation(\n  $input: UpdateCodesharePermissionsInput!\n) {\n  updateCodesharePermissions(input: $input) {\n    codeshare {\n      id\n      canEdit {\n        userIds\n        me\n      }\n    }\n  }\n}\n"}}}();Wa.hash="f9d0ffae8efb89556ae54819d5817753";var Ya=Wa;function Xa(e,n){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),a.push.apply(a,r)}return a}function er(e){for(var n=1;n<arguments.length;n++){var a=null!=arguments[n]?arguments[n]:{};n%2?Xa(Object(a),!0).forEach((function(n){(0,r.Z)(e,n,a[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Xa(Object(a)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))}))}return e}function nr(e){const n=(0,C.useRelayEnvironment)(),a=(0,C.useFragment)(Ha,e.me),r=(0,C.useFragment)(Za,e.codeshare),s=(0,M.useState)(!1),l=s[0],t=s[1],o=function(e){const n=(0,C.useFragment)(Ja,e);return Boolean(n.canEdit.userIds)}(r),i=(0,L.Z)(a);function d(){xa.Z.track("Clicked view-only checkbox",{creator:!r.createdBy.me,anonymous:a.anonymous})}function u(){xa.Z.track("Hover view-only",{creator:!r.createdBy.me,anonymous:a.anonymous})}let c={checked:o,label:'"View only" mode',note:'Turn on "view only" mode if you dont want others to edit the code',name:"view-only"};return c=r.createdBy.me?a.anonymous?er(er({},c),{},{hint:"Sorry, only registered users can manage permissions.",onChange:d,onMouseEnter:u}):er(er({},c),{},o||i?{hint:'Toggle "view only" mode',onChange:function(e){(0,ee.commitMutation)(n,{mutation:Ya,variables:{input:{id:r.id,viewOnly:!o}},optimisticResponse:{updateCodesharePermissions:{codeshare:{id:r.id,canEdit:o?{userIds:[r.createdBy.userId],me:r.createdBy.me}:{userIds:null,me:!0}}}}})}}:{hint:"This requires Codeshare Pro. Click to learn more.",onChange:()=>t(!0),onMouseEnter:u}):er(er({},c),{},{hint:"Sorry, only the creator of the Codeshare (".concat(r.createdBy.user.name||"anonymous",") can manage permissions."),onChange:d,onMouseEnter:u}),(0,xe.jsxs)("div",{children:[(0,xe.jsx)($a,er({},c)),l?(0,xe.jsx)(Ga.Z,{me:a,trigger:"view-only-checkbox",onClose:()=>t(!1)}):null]})}var ar=a(55769);function rr(e){const n=(0,C.useFragment)(Ta,e.me),a=(0,C.useFragment)(Ma,e.codeshare);return(0,xe.jsx)(ar.Z,{onClose:e.onClose,title:"Share Code",renderBody:()=>(0,xe.jsxs)("div",{className:"share-modal",children:[(0,xe.jsx)("p",{children:"Anyone with access to this URL will see your code in real time."}),(0,xe.jsx)(Na,{codeshare:a}),(0,xe.jsx)(nr,{me:n,codeshare:a})]})})}var sr=a(46359),lr=a(74685),tr=a(88986),or=a(68173);var ir=e=>{const n=(0,M.useState)(!1),a=n[0],r=n[1],s=(0,C.useFragment)(fa,e.me),l=(0,C.useFragment)(pa,e.codeshare),t=(0,L.Z)(s),o=(0,M.useCallback)((()=>l.createdBy.user.companyImage?(0,xe.jsxs)("div",{className:"span6",children:[(0,xe.jsx)(lr.Z,{link:!0,alt:"Codeshare logo",className:"header__logo-only",src:l.createdBy.user.companyImage}),(0,xe.jsx)("h1",{id:"title",children:(0,ua.Z)(l)})]}):s.anonymous?null:(0,xe.jsxs)("div",{className:"span6",children:[(0,xe.jsx)(lr.Z,{link:!0,alt:"Codeshare logo",className:"header__logo-only",src:"/-/img/codeshare-logo-small.svg"}),(0,xe.jsx)("h1",{id:"title",children:(0,ua.Z)(l)})]})),[s,l]);return(0,xe.jsxs)(M.Fragment,{children:[(0,xe.jsx)(or.Z,{me:s,renderAnonActions:()=>l.createdBy.me?[(0,xe.jsx)("span",{id:"expire-time",children:"Expires in 24 hours\xa0\xa0"},"1"),(0,xe.jsx)(sr.Z,{href:"/register?saveCodeshare=".concat(encodeURIComponent(Ln().decodeRelayId("Codeshare",l.id))),rel:"nofollow",className:"btn btn-primary btn-sm",children:"Save Codeshare"},"2"),(0,xe.jsx)(Ia,{codeshare:l,onClick:()=>r(!0),size:Ca.NO.SMALL,theme:Ca.yU.SECONDARY},"share"),(0,xe.jsx)(sr.Z,{href:"/login",className:"btn btn-secondary btn-sm",children:"Log In"},"login")]:[(0,xe.jsx)(Ia,{codeshare:l,onClick:()=>r(!0),size:Ca.NO.SMALL,theme:Ca.yU.SECONDARY},"share"),(0,xe.jsx)(sr.Z,{href:"/register",className:"btn btn-secondary btn-sm",children:"Sign Up"},"register"),(0,xe.jsx)(sr.Z,{href:"/login",className:"btn btn-secondary btn-sm",children:"Log In"},"login")],renderAuthActions:()=>{const e=[(0,xe.jsx)("li",{children:(0,xe.jsx)(Ia,{codeshare:l,onClick:()=>r(!0),size:Ca.NO.SMALL,theme:Ca.yU.SECONDARY})},"share")];return t||e.unshift((0,xe.jsx)("li",{children:(0,xe.jsx)(tr.Z,{locationDesc:"codeshare-page-navbar",me:s,size:Ca.NO.SMALL,theme:Ca.yU.PRIMARY,children:"Upgrade"})},"upgrade")),e},children:o()}),a?(0,xe.jsx)(rr,{me:s,codeshare:l,onClose:()=>r(!1)}):null]})};const dr={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CodeshareSidebarSubscription_codeshare",selections:[{args:null,kind:"FragmentSpread",name:"CodeshareSettingsFormSubscription_codeshare"}],type:"Codeshare",abstractKey:null,hash:"a31d58e474c29dcf44656114e10b22b9"};var ur=dr;const cr={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CodeshareSidebarSubscription_me",selections:[{args:null,kind:"FragmentSpread",name:"CodeshareSettingsFormSubscription_me"}],type:"Me",abstractKey:null,hash:"fb020ffccca7982ae5c81923d87b4fda"};var mr=cr;const gr={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CodeshareSidebar_codeshare",selections:[{args:null,kind:"FragmentSpread",name:"CodeshareSettingsForm_codeshare"},{args:null,kind:"FragmentSpread",name:"CodeshareDownloadButton_codeshare"},{alias:null,args:null,concreteType:"CreatedBy",kind:"LinkedField",name:"createdBy",plural:!1,selections:[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"user",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"isCodeshareProSubscriber_user"}],storageKey:null}],storageKey:null}],type:"Codeshare",abstractKey:null,hash:"e4d05c3c1bfc12857e8f9188ce26afd2"};var hr=gr;const pr={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CodeshareSidebar_me",selections:[{args:null,kind:"FragmentSpread",name:"isCodeshareProSubscriber_me"},{args:null,kind:"FragmentSpread",name:"CodeshareSettingsForm_me"}],type:"Me",abstractKey:null,hash:"e0bdb0b33c37b0e3b666f3cd520771e0"};var yr=pr;const fr={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CodeshareDownloadButton_codeshare",selections:[{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"createdAt",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"modeName",storageKey:null}],type:"Codeshare",abstractKey:null,hash:"6b1de6405f39d8251581f39820b0da40"};var Cr=fr;a(60285);function kr(e){const n=(0,M.useContext)(T).codeMirror,a=(0,C.useFragment)(Cr,e.codeshare);return(0,xe.jsx)("button",{id:"codeshare-download-button",className:"btn-icon hint--left","data-hint":"Download",disabled:null==n,onClick:e=>{if(e.stopPropagation(),!n)return;const r=(0,Ve.BL)(a.modeName),s=Ve.ZP.find((e=>e.name.toLowerCase()===r.name.toLowerCase()))||je.v,l=n.getValue(),t=new Blob([l],{type:"".concat(s.mime,";charset=utf-8")}),o=(0,ua.Z)(a),i=(0,ze.r6)(s);!function(e,n){b.Z.assert(te.Z,"downloadBlob can only be invoked in browser");const a=document.createElement("a");a.download=n,a.innerHTML="Download File",a.href=URL.createObjectURL(e),a.style.display="none",document.body.appendChild(a),a.click(),setTimeout((()=>{URL.revokeObjectURL(a.href),document.body.removeChild(a)}),1e4)}(t,"".concat(o,".").concat(i))},children:(0,xe.jsx)(va.G,{icon:Sa.q7m})})}const br={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CodeshareSettingsFormSubscription_codeshare",selections:[{args:null,kind:"FragmentSpread",name:"CodeshareTitleFormField_codeshare"},{args:null,kind:"FragmentSpread",name:"CodeshareModeNameFormField_codeshare"},{args:null,kind:"FragmentSpread",name:"CodeshareTabSizeFormField_codeshare"}],type:"Codeshare",abstractKey:null,hash:"94b85af44b8239876e7471f47ca0fdd4"};var Fr=br;const Sr={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CodeshareSettingsFormSubscription_me",selections:[{args:null,kind:"FragmentSpread",name:"CodeshareThemeFormField_me"},{args:null,kind:"FragmentSpread",name:"CodeshareKeymapFormField_me"}],type:"Me",abstractKey:null,hash:"92e087adb56f91c8f7cc3ef5f2d2dbd6"};var vr=Sr;const _r={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CodeshareSettingsForm_codeshare",selections:[{args:null,kind:"FragmentSpread",name:"CodeshareTitleFormField_codeshare"},{args:null,kind:"FragmentSpread",name:"CodeshareModeNameFormField_codeshare"},{args:null,kind:"FragmentSpread",name:"CodeshareTabSizeFormField_codeshare"}],type:"Codeshare",abstractKey:null,hash:"dae2b1cf9e698af33ed4d7e8097fd905"};var Kr=_r;const Er={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CodeshareSettingsForm_me",selections:[{alias:null,args:null,kind:"ScalarField",name:"anonymous",storageKey:null},{args:null,kind:"FragmentSpread",name:"CodeshareThemeFormField_me"},{args:null,kind:"FragmentSpread",name:"CodeshareKeymapFormField_me"}],type:"Me",abstractKey:null,hash:"7cb504ff1f8b586781c458eac03ecc0c"};var Ir=Er;const Or={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CodeshareKeymapFormField_me",selections:[{args:null,kind:"FragmentSpread",name:"useKeymap_me"}],type:"Me",abstractKey:null,hash:"0d0d273861ff0227c0e1a36283793e4a"};var Mr=Or,Lr=a(17607),Tr=a(96767);function wr(e){const n=on((0,C.useFragment)(Mr,e.me)),a=(0,j.Z)(n,2),r=a[0],s=a[1];return(0,xe.jsx)(Tr.Z,{name:"keymap",type:"select",label:"Keymap",autoFocus:e.autoFocus,value:r,options:Lr.ZP,onChange:s})}const Dr={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CodeshareModeNameFormField_codeshare",selections:[{args:null,kind:"FragmentSpread",name:"useCodeshareModeName_codeshare"},{alias:null,args:null,concreteType:"CanEdit",kind:"LinkedField",name:"canEdit",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"me",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"userIds",storageKey:null}],storageKey:null}],type:"Codeshare",abstractKey:null,hash:"44a0b075824a4d3bc10a07fdd92425df"};var xr=Dr;function Ar(e){const n=(0,C.useFragment)(xr,e.codeshare),a=Je(n),r=(0,j.Z)(a,2),s=r[0],l=r[1];return(0,xe.jsx)(Tr.Z,{name:"modeName",type:"select",label:"Syntax",disabled:!n.canEdit.me,autoFocus:e.autoFocus,value:s,options:Ve.fo,onChange:l})}const jr={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CodeshareTabSizeFormField_codeshare",selections:[{args:null,kind:"FragmentSpread",name:"useCodeshareTabSize_codeshare"},{alias:null,args:null,concreteType:"CanEdit",kind:"LinkedField",name:"canEdit",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"me",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"userIds",storageKey:null}],storageKey:null}],type:"Codeshare",abstractKey:null,hash:"91604d76920a6f52486445c0776bb8b1"};var Nr=jr,Pr=a(2655);function Zr(e){const n=(0,C.useFragment)(Nr,e.codeshare),a=nn(n),r=(0,j.Z)(a,2),s=r[0],l=r[1];return(0,xe.jsx)(Tr.Z,{name:"tabSize",type:"select",label:"Tab Size",disabled:!n.canEdit.me,autoFocus:e.autoFocus,value:s,options:Pr.Z,onChange:l})}const Ur={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CodeshareThemeFormField_me",selections:[{args:null,kind:"FragmentSpread",name:"useTheme_me"}],type:"Me",abstractKey:null,hash:"7519a91b3bed27fc7400e354fbe9b34b"};var Hr=Ur,Rr=a(38804);function Br(e){const n=gn((0,C.useFragment)(Hr,e.me)),a=(0,j.Z)(n,2),r=a[0],s=a[1];return(0,xe.jsx)(Tr.Z,{name:"theme",type:"select",label:"Theme",autoFocus:e.autoFocus,value:r,options:Rr.ZP,onChange:s})}const Vr={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CodeshareTitleFormField_codeshare",selections:[{args:null,kind:"FragmentSpread",name:"useCodeshareTitle_codeshare"},{alias:null,args:null,concreteType:"CanEdit",kind:"LinkedField",name:"canEdit",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"me",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"userIds",storageKey:null}],storageKey:null}],type:"Codeshare",abstractKey:null,hash:"ff19f7e9f441897c38962242daaadf94"};var zr=Vr;const qr={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useCodeshareTitleSubscription_codeshare",selections:[{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null}],type:"Codeshare",abstractKey:null,hash:"4761b34677f8cde227277f0fd5a9ee9c"};var $r=qr;const Gr=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"input"}],n=[{alias:null,args:[{kind:"Variable",name:"input",variableName:"input"}],concreteType:"UpdateCodeshareResponse",kind:"LinkedField",name:"updateCodeshare",plural:!1,selections:[{alias:null,args:null,concreteType:"Codeshare",kind:"LinkedField",name:"codeshare",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"createdAt",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"useCodeshareTitleMutation",selections:n,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"useCodeshareTitleMutation",selections:n},params:{cacheID:"048319df5c66f659c79c80a2c8b45529",id:null,metadata:{},name:"useCodeshareTitleMutation",operationKind:"mutation",text:"mutation useCodeshareTitleMutation(\n  $input: UpdateCodeshareInput!\n) {\n  updateCodeshare(input: $input) {\n    codeshare {\n      id\n      createdAt\n      title\n    }\n  }\n}\n"}}}();Gr.hash="61bcd8eb4195f64f02bc9397bd92c923";var Qr=Gr;const Jr={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useCodeshareTitle_codeshare",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"createdAt",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null}],type:"Codeshare",abstractKey:null,hash:"d48bdb65f2475bc1e065c140000d9372"};var Wr=Jr;function Yr(e,n){const a=(0,C.useRelayEnvironment)(),r=(0,C.useFragment)(Wr,e);return[n?r.title||"":(0,ua.Z)(r),function(e){ke(a,500,{mutation:Qr,variables:{input:{id:r.id,title:e}},optimisticResponse:{updateCodeshare:{codeshare:{id:r.id,createdAt:r.createdAt,title:e}}}})}]}function Xr(e){const n=(0,C.useFragment)(zr,e.codeshare),a=Yr(n,!0),r=(0,j.Z)(a,2),s=r[0],l=r[1];return(0,xe.jsx)(Tr.Z,{name:"title",type:"text",label:"Title",disabled:!n.canEdit.me,autoFocus:e.autoFocus,value:s,onChange:l})}Yr.subscriptionFragment=$r;var es=a(26173);function ns(e){const n=(0,C.useFragment)(Ir,e.me),a=(0,C.useFragment)(Kr,e.codeshare);return(0,xe.jsxs)(es.Z,{id:"codeshare-settings",onSubmit:()=>{},children:[n.anonymous?null:(0,xe.jsx)(Xr,{codeshare:a}),(0,xe.jsx)(Ar,{codeshare:a})," ",(0,xe.jsx)(Zr,{codeshare:a}),(0,xe.jsx)(Br,{me:n}),(0,xe.jsx)(wr,{me:n})]})}ns.meSubscriptionFragment=vr,ns.codeshareSubscriptionFragment=Fr;var as=a(97407);function rs(e){if(!(e.value in e.cases))return e.default;const n=e.value;return(0,xe.jsx)(as.Z,{value:n,cases:e.cases})}function ss(e){return(0,xe.jsx)("section",{className:"cs-sidebar-panel",children:(0,xe.jsx)(rs,{value:e.activePanel,cases:e.panels,default:null})})}function ls(e){return(0,xe.jsxs)("div",{id:e.id,className:"cs-sidebar-content",children:[(0,xe.jsx)("button",{className:"cs-sidebar-btn-hide btn-icon",onClick:e.onClose,children:(0,xe.jsx)(va.G,{icon:Sa.NBC,className:"fa-remove"})}),e.children]})}var ts=a(13192);const os=a.n(ts)()({ABOUT:null,SETTINGS:null});function is(e){const n=(0,M.useRef)(null),a=(0,M.useState)(null),r=a[0],s=a[1];function l(e){if(e===r)return s(null);s(e)}const t=(0,C.useFragment)(yr,e.me),o=(0,C.useFragment)(hr,e.codeshare);(0,L.Z)(t),(0,L.A)(o.createdBy.user);return(0,M.useEffect)((()=>{function e(e){var a;null!==n&&void 0!==n&&null!==(a=n.current)&&void 0!==a&&a.contains(e.target)||s(null)}return window.addEventListener("click",e),()=>{window.removeEventListener("click",e)}}),[]),(0,xe.jsxs)("aside",{id:"sidebar",ref:n,className:Ba()({"cs-sidebar":!0,"js-sidebar":!0,"is-open":r}),children:[(0,xe.jsx)("nav",{className:"cs-sidebar-nav",children:(0,xe.jsxs)("ul",{children:[(0,xe.jsx)("li",{children:(0,xe.jsx)("button",{className:Ba()({"btn-icon":!0,"hint--left":!0,"is-active":r===os.SETTINGS}),"data-hint":"Editor Settings",onClick:()=>l(os.SETTINGS),children:(0,xe.jsx)(va.G,{icon:Sa.b7W})})}),(0,xe.jsx)("li",{children:(0,xe.jsx)(kr,{codeshare:o})}),(0,xe.jsx)("li",{children:(0,xe.jsx)("a",{className:"btn-icon hint--left",href:"/new",rel:"nofollow","data-hint":"Create a New Codeshare",children:(0,xe.jsx)(va.G,{icon:Sa.r8p})})}),(0,xe.jsx)("li",{children:(0,xe.jsx)("button",{className:Ba()({"btn-icon":!0,"hint--left":!0,"btn-aboutcodeshare":!0,"is-active":r===os.ABOUT}),"data-hint":"About / Request Feature",onClick:()=>l(os.ABOUT),children:(0,xe.jsx)(va.G,{icon:Sa.sqG})})})]})}),(0,xe.jsx)(ss,{activePanel:r,panels:{[os.SETTINGS]:(0,xe.jsxs)(ls,{onClose:()=>s(null),children:[(0,xe.jsx)("div",{className:"content-header",children:(0,xe.jsx)("h3",{className:"content-header_title",children:"Settings"})}),(0,xe.jsx)("div",{className:"content-body",children:(0,xe.jsx)(ns,{me:t,codeshare:o})})]}),[os.ABOUT]:(0,xe.jsx)(ls,{onClose:()=>s(null),children:(0,xe.jsxs)("div",{className:"content-body",children:[(0,xe.jsx)("p",{children:"\ud83d\udc69\ud83c\udffb\u200d\ud83d\udcbb Codeshare enables developers to share code in real-time. Write or paste code in your browser, share the URL, code in real-time with friends and team mates."}),(0,xe.jsxs)("p",{children:["\ud83d\udd28 Codeshare was built and maintained by"," ",(0,xe.jsx)(sr.Z,{href:"https://twitter.com/leemunroe",target:"_blank",rel:"external",children:"Lee Munroe"})," ","and"," ",(0,xe.jsx)(sr.Z,{href:"https://twitter.com/tjmehta",target:"_blank",rel:"external",children:"TJ Mehta"}),"."]}),(0,xe.jsx)("p",{children:"\ud83d\udde3\ufe0f If you have feedback or feature requests, reachout on X."})]})})}})]})}is.meSubscriptionFragment=mr,is.codeshareSubscriptionFragment=ur;const ds={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"NagModal_codeshare",selections:[{args:null,kind:"FragmentSpread",name:"LoginRegisterModal_codeshare"},{alias:null,args:null,concreteType:"CreatedBy",kind:"LinkedField",name:"createdBy",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"me",storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"user",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"isCodeshareProSubscriber_user"}],storageKey:null}],storageKey:null}],type:"Codeshare",abstractKey:null,hash:"46804d156c67c9561c3f5456cdb84567"};var us=ds;const cs={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"NagModal_me",selections:[{alias:null,args:null,kind:"ScalarField",name:"anonymous",storageKey:null},{args:null,kind:"FragmentSpread",name:"LoginRegisterModal_me"}],type:"Me",abstractKey:null,hash:"b448df1e4d5637e577ec84c2c9dc1e45"};var ms=cs,gs=a(13126);function hs(e){const n=(0,M.useState)(!1),a=n[0],r=n[1],s=(0,M.useRef)(!1),l=(0,C.useFragment)(ms,e.me),t=(0,C.useFragment)(us,e.codeshare),o=!l.anonymous,i=(0,L.A)(t.createdBy.user);return(0,M.useEffect)((()=>{if(o||i)return void W.Z.debug("NagModal: blocked",{userIsRegistered:o,creatorIsProSubscriber:i});let e=Ue.Z?36e5:t.createdBy.me?6e5:9e5;W.Z.debug("NagModal: duration",{duration:e});const n=setTimeout((()=>r(!0)),e);return()=>clearTimeout(n)}),[l.anonymous]),(0,M.useEffect)((()=>()=>{s.current=!0}),[]),a?(0,xe.jsx)(gs.Z,{source:"nag",me:l,codeshare:t,onClose:()=>{s.current||r(!1)}}):null}const ps={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"SponsorAllInOne_me",selections:[{args:null,kind:"FragmentSpread",name:"SimpleSponsorFooter_me"},{args:null,kind:"FragmentSpread",name:"SimpleOptimizeSponsor_me"},{args:null,kind:"FragmentSpread",name:"SimpleSadFace_me"}],type:"Me",abstractKey:null,hash:"9ba815a9ec955d532ca488242945d817"};var ys=ps;a(41817),a(26699),a(32023);const fs={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"SimpleSponsorFooter_me",selections:[{args:null,kind:"FragmentSpread",name:"PlansButton_me"}],type:"Me",abstractKey:null,hash:"b134d977f38ca01c026584b9aa74b02b"};var Cs,ks=fs;function bs(e){return(0,xe.jsx)("button",{onClick:e.onClick,className:"btn-icon btn-hide",children:(0,xe.jsx)(va.G,{icon:Sa.NBC,className:"fa-remove"})})}class Fs extends b.Z{}let Ss;function vs(e){var n,a,r,s,l,t;let o=e.me,i=e.onError,d=e.url;const u=(0,M.useState)(Cs.LOADING),c=u[0],m=u[1],g=(0,M.useState)(),h=g[0],p=g[1],y=(0,M.useRef)(null),f=(0,M.useState)(!1),k=f[0],b=f[1],F=(0,C.useFragment)(ks,o);return(0,M.useEffect)((()=>{const e=new AbortController,n=e.signal;return fetch(d,{signal:n}).then((e=>e.json())).then((e=>{if(n.aborted)throw new Fs("aborted");const a=e.ads&&e.ads[0]||null;if(null==(null===a||void 0===a?void 0:a.description))return W.Z.warn("SPFoot: sponsor api request received empty ad",{url:d,json:e}),m(Cs.FAILED),void i(Ss.NO_AD);m(Cs.LOADED),p(a)})).catch((e=>{"AbortError"!==e.name?(W.Z.warn("SPFoot: sponsor api request failed",{url:d,err:e}),m(Cs.FAILED),i(Ss.FETCH_FAILED)):W.Z.warn("SPFoot: fetch json aborted",{url:d,err:e})})),()=>e.abort()}),[d,i]),(0,M.useEffect)((()=>{if(null==h)return;var e;if(k)return void xa.Z.track("Viewed ad",{source:"footer",url:d,company:null!==(e=null===h||void 0===h?void 0:h.company)&&void 0!==e?e:"unknown"});const n=setTimeout((()=>{W.Z.warn("SPFoot: pixel failed",{url:d}),m(Cs.FAILED),i(Ss.AD_BLOCKED)}),5e3);return()=>{clearTimeout(n)}}),[k,h,i]),c===Cs.CLOSED||c===Cs.FAILED?null:[Cs.LOADED].includes(c)?null==h?null:(0,xe.jsx)("div",{id:"native-fixed-js",className:"sp-footbar",style:{backgroundColor:null!==(n=h.backgroundColor)&&void 0!==n?n:"#000"},children:(0,xe.jsxs)("div",{className:"native-fixed",style:{backgroundColor:null!==(a=h.backgroundColor)&&void 0!==a?a:"#000"},children:[(0,xe.jsx)("div",{style:{position:"absolute",left:"12px",margin:"auto 0"},children:(0,xe.jsx)(bs,{onClick:e=>{var n;e.stopPropagation(),e.preventDefault(),xa.Z.track("Closed ad",{source:"footer",url:d,company:null!==(n=null===h||void 0===h?void 0:h.company)&&void 0!==n?n:"unknown"}),m(Cs.CLOSED)}})}),(0,xe.jsxs)("a",{href:/[?]/.test(h.statlink)?h.statlink:"".concat(h.statlink,"?segment=placement:codeshareio-footer;"),onClick:()=>{var e;xa.Z.track("Clicked ad",{source:"footer",url:d,company:null!==(e=null===h||void 0===h?void 0:h.company)&&void 0!==e?e:"unknown"})},target:"_blank",rel:"sponsored noopener",children:[(0,xe.jsx)("span",{className:"native-sponsor",style:{color:null!==(r=h.backgroundColor)&&void 0!==r?r:"#000",backgroundColor:null!==(s=h.textColor)&&void 0!==s?s:"#fff"},children:"Sponsor"}),(0,xe.jsx)("span",{ref:y,className:"native-text",style:{color:null!==(l=h.textColor)&&void 0!==l?l:"#fff",backgroundColor:null!==(t=h.backgroundColor)&&void 0!==t?t:"#000"},children:h.company?"".concat(h.company," - ").concat(h.description):h.description}),(0,xe.jsx)("img",{alt:"px",style:{position:"absolute",top:"1000px",height:"1px",width:"1px"},src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNk+M9QDwADhgGAWjR9awAAAABJRU5ErkJggg==",onLoad:()=>{b(!0)}})]}),(0,xe.jsx)("div",{style:{position:"absolute",right:"62px",margin:"auto 0"},children:(0,xe.jsx)(tr.Z,{locationDesc:"sponsor-blocked-footer",noIcon:!0,me:F,theme:Ca.yU.HIDE_ADS,children:"Hide Ads"})})]})}):null}!function(e){e[e.LOADING=0]="LOADING",e[e.LOADED=1]="LOADED",e[e.FAILED=2]="FAILED",e[e.CLOSED=3]="CLOSED"}(Cs||(Cs={})),function(e){e[e.NO_AD=0]="NO_AD",e[e.FETCH_FAILED=1]="FETCH_FAILED",e[e.INIT_FAILED=2]="INIT_FAILED",e[e.RENDER_FAILED=3]="RENDER_FAILED",e[e.AD_BLOCKED=4]="AD_BLOCKED"}(Ss||(Ss={}));const _s={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"SimpleSadFace_me",selections:[{args:null,kind:"FragmentSpread",name:"PlansButton_me"},{args:null,kind:"FragmentSpread",name:"SponsorScriptToast_me"}],type:"Me",abstractKey:null,hash:"119b5b74c04f91712c6c8526d87189e8"};var Ks,Es=_s;function Is(e){let n=e.me;const a=(0,M.useState)(Ks.RENDERED),r=a[0],s=(a[1],(0,C.useFragment)(Es,n));return r===Ks.CLOSED?null:(0,xe.jsx)("div",{id:"native-fixed-js",className:"sp-footbar",style:{backgroundColor:"#000"},children:(0,xe.jsxs)("div",{className:"sad-face",style:{color:"white",fontSize:"14px",lineHeight:"14px",backgroundColor:"hsl(70, 8%, 12%)",borderTop:"solid 1px hsla(0, 0%, 13%, 0.8)",position:"fixed",inset:"auto 0 0 0",display:"flex",justifyContent:"center",alignItems:"center",zIndex:5,textDecoration:"none",padding:"1.75ex 2ch",paddingRight:"50px"},children:[(0,xe.jsxs)("span",{style:{color:"#fff"},children:[(0,xe.jsx)(bs,{onClick:()=>{alert("Please don't block our ads :(")}}),(0,xe.jsx)("span",{style:{fontSize:"1em",lineHeight:"1.3",backgroundColor:"hsl(70, 8%, 12%)"},children:"Please don't block our ads :( \uff0d Ad sponsors allow us to make Codeshare free."})]}),(0,xe.jsx)("div",{style:{position:"absolute",right:"62px",top:"10px"},children:(0,xe.jsx)(tr.Z,{locationDesc:"sponsor-blocked-footer",noIcon:!0,me:s,theme:Ca.yU.HIDE_ADS,children:"Hide Ads"})})]})})}!function(e){e[e.RENDERED=0]="RENDERED",e[e.CLOSED=1]="CLOSED"}(Ks||(Ks={}));const Os={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"SimpleOptimizeSponsor_me",selections:[{args:null,kind:"FragmentSpread",name:"PlansButton_me"}],type:"Me",abstractKey:null,hash:"ec03cda35ead6556d1c8c5ca45472bb5"};var Ms,Ls=Os,Ts=a(7246),ws=(a(17727),a(39714),a(34050));class Ds extends b.Z{}function xs(){return(xs=(0,s.Z)(t().mark((function e(n){var a,r,s,l,o,i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.url,r=n.async,s=n.signal,l=n.timeout,o=new ws.Z([s]),i=o.signal,e.abrupt("return",Promise.race([(0,Ts.Z)(l,i).then((()=>{throw new Ds("Script timedout",{url:a,timeout:l})})),new Promise(((e,n)=>{const s=document.createElement("script");s.type="text/javascript",r&&(s.async=!0),s.src=a,s.onload=()=>e(),s.onerror=e=>{n(new Ds("Script load error: ".concat(e.toString()),{url:a,timeout:l}))},(document.getElementsByTagName("body")[0]||document.getElementsByTagName("body")[0]).appendChild(s)}))]).finally((()=>{o.abort()})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(e){e[e.LOADING=0]="LOADING",e[e.INITIALIZING=1]="INITIALIZING",e[e.RENDERING=2]="RENDERING",e[e.RENDERED=3]="RENDERED",e[e.FAILED=4]="FAILED",e[e.CLOSED=5]="CLOSED"}(Ms||(Ms={}));const As="bsa-zone_1696457203292-7_123456";function js(e){let n=e.me,a=e.onError;const r=(0,M.useState)(Ms.LOADING),s=r[0],l=r[1],t=(0,M.useState)(!1),o=t[0],i=t[1],d=(0,M.useRef)(null),u=(0,M.useRef)(null),c=(0,C.useFragment)(Ls,n);function m(){xa.Z.track("Clicked ad",{source:"script"})}return(0,M.useEffect)((()=>{const e=new AbortController,n=e.signal;return W.Z.debug("SimpleOptimizeSponsor",{adState:"load"}),function(e){return xs.apply(this,arguments)}({url:"https://cdn4.buysellads.net/pub/codeshareio.js?"+((new Date).valueOf()-(new Date).valueOf()%6e5),async:!0,timeout:5e3,signal:n}).then((()=>(W.Z.debug("SimpleOptimizeSponsor",{adState:"loading: success"}),(0,Ts.Z)(100,n)))).then((()=>{l(Ms.INITIALIZING)})).catch((e=>{l(Ms.FAILED),a(Ss.FETCH_FAILED)})),()=>e.abort()}),[]),(0,M.useEffect)((()=>{if(!d.current)return;if(s!==Ms.INITIALIZING)return;W.Z.debug("SimpleOptimizeSponsor",{adState:s});let e=window.optimize;if(!e)return l(Ms.FAILED),void a(Ss.INIT_FAILED);e=e||{queue:[]},e.queue.push((()=>{e.push(As)})),W.Z.debug("SimpleOptimizeSponsor",{adState:"init: success"}),l(Ms.RENDERING)}),[d.current,s]),(0,M.useEffect)((()=>{if(s!==Ms.RENDERED)return;if(o)return;const e=setTimeout((()=>{l(Ms.FAILED),a(Ss.AD_BLOCKED)}),5e3);return()=>{clearTimeout(e)}}),[s,o]),(0,M.useEffect)((()=>{if(!d.current)return;if(null==window.MutationObserver)return;const e=new MutationObserver((e=>{e.forEach((e=>{if("attributes"!==e.type)return;const n=e.attributeName;if(null==n)return;if("data-google-query-id"!==n)return;null!==e.target.getAttribute("data-google-query-id")&&(l(Ms.RENDERED),xa.Z.track("Viewed ad",{source:"optimize"}))}))}));return e.observe(d.current,{attributes:!0}),()=>e.disconnect()}),[d.current]),(0,M.useEffect)((()=>{if(d.current)return window.addEventListener("blur",e),()=>window.removeEventListener("blur",e);function e(){setTimeout((function(){var e,n;"IFRAME"===(null===(e=document.activeElement)||void 0===e?void 0:e.tagName.toUpperCase())&&null!==(n=d.current)&&void 0!==n&&n.contains(document.activeElement)&&m()}),0)}}),[d.current]),s===Ms.FAILED||s===Ms.CLOSED?null:[Ms.INITIALIZING,Ms.RENDERING,Ms.RENDERED].includes(s)?(0,xe.jsxs)("div",{ref:u,className:Ba()({"sp-codeshare-id":!0,"hide-absolute":s!==Ms.RENDERED}),onClick:m,children:[(0,xe.jsx)(bs,{onClick:()=>{xa.Z.track("Closed ad",{source:"script"}),l(Ms.CLOSED)}}),(0,xe.jsx)("div",{id:As,ref:d}),s!==Ms.RENDERED?null:(0,xe.jsx)("div",{style:{position:"relative",overflow:"hidden"},children:(0,xe.jsx)("img",{alt:"px",style:{position:"absolute",top:"1000px",height:"1px",width:"1px"},src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNk+M9QDwADhgGAWjR9awAAAABJRU5ErkJggg==",onLoad:()=>{i(!0)}})}),(0,xe.jsx)(tr.Z,{locationDesc:"sponsor-toast",noIcon:!0,me:c,theme:Ca.yU.HIDE_ADS,children:"Hide Ads"})]}):null}function Ns(e){let n=e.me;const a=(0,M.useState)(0),r=a[0],s=a[1],l=(0,C.useFragment)(ys,n),t=(0,M.useCallback)((e=>{W.Z.debug("SponsorAllInOne: onAdError",{reason:e}),s((e=>e+1))}),[]);switch((0,M.useEffect)((()=>{W.Z.debug("SponsorAllInOne: attempt",{attempt:r})}),[r]),r){case 0:return(0,xe.jsx)(vs,{me:l,url:"/-/sp.json?k=".concat("CESIKK7N","&t=f"),onError:t});case 1:return(0,xe.jsx)(vs,{me:l,url:"/-/sp.json?k=".concat("CKYDVKQW","&t=f"),onError:t});case 2:return(0,xe.jsx)(js,{me:l,onError:()=>{s((e=>e+1))}});default:return(0,xe.jsx)(Is,{me:l})}}const Ps=te.Z?M.Suspense:e=>e.children;function Zs(e){(0,M.useEffect)((()=>xa.Z.page()),[]);const n=(0,M.useState)(null),a=n[0],r=n[1],s=(0,C.useFragment)(O,e.viewer).me,l=(0,C.useFragment)(E,e.codeshare),t=(0,L.Z)(s),o=(0,L.A)(l.createdBy.user),i=(0,M.useRef)(l);l&&(i.current=l);const d=t||o?null:(0,xe.jsx)(Ns,{me:s});return(0,xe.jsx)("div",{id:"codeshare",children:(0,xe.jsxs)(T.Provider,{value:{codeMirror:a,setCodeMirror:r},children:[(0,xe.jsx)(ga,{me:s,codeshare:l}),(0,xe.jsx)(ir,{me:s,codeshare:l}),(0,xe.jsx)(Ae,{}),(0,xe.jsx)("div",{id:"main",children:(0,xe.jsx)(Ps,{fallback:(0,xe.jsx)("div",{children:"Reloading..."}),children:(0,xe.jsx)(ea,{me:s,codeshare:l,refetching:!1})})}),(0,xe.jsx)(is,{me:s,codeshare:l}),(0,xe.jsx)("div",{id:"local-video",className:"local-video"}),(0,xe.jsx)("div",{id:"remote-videos",className:"remote-videos"}),(0,xe.jsx)(hs,{me:s,codeshare:l}),d]})})}Zs.meSubscriptionFragment=_,Zs.codeshareSubscriptionFragment=S;var Us=a(73496),Hs=a(2349);function Rs(e,n,a){const r=(0,ee.requestSubscription)(e,n),s=a?oe(a):null;return{dispose(){r.dispose(),s&&s.dispose()}}}function Bs(e,n){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),a.push.apply(a,r)}return a}function Vs(e){for(var n=1;n<arguments.length;n++){var a=null!=arguments[n]?arguments[n]:{};n%2?Bs(Object(a),!0).forEach((function(n){(0,r.Z)(e,n,a[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Bs(Object(a)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))}))}return e}const zs=e=>{let n=e.apiHeaders,a=e.queryProps,r=e.queryRecords,l=e.codeshareId;W.Z.debug("env!!!",null),b.Z.assert(a,"relay fetch failed",{apiHeaders:n,queryProps:a,queryRecords:r,codeshareId:l});const o=(0,Us.Z)({apiHeaders:n,records:r});te.Z&&(0,M.useEffect)((()=>{W.Z.debug("subscribe: CodeshareIdMeSubscription");const e=Rs(o,{subscription:y,updater:e=>{const n=e.getRootField("meUpdates").getLinkedRecord("viewer");e.getRoot().setLinkedRecord(n,"viewer")},variables:{input:{}}},function(){var e=(0,s.Z)(t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,C.fetchQuery)(o,h,{}).toPromise();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}());W.Z.debug("subscribe: CodeshareIdCodeshareSubscription");const n=Rs(o,{subscription:m,variables:{input:{id:l}}},function(){var e=(0,s.Z)(t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,C.fetchQuery)(o,u,Vs(Vs({codeshareId:l},Pn),z)).toPromise();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}());return()=>{e.dispose(),n.dispose()}}),[]);const i=a.viewer;return te.Z&&i.me.email&&xa.Z.identify(i.me.id,{anonymous:i.me.anonymous,name:i.me.name,email:i.me.email}),(0,xe.jsx)(C.RelayEnvironmentProvider,{environment:o,children:(0,xe.jsx)(f.Z.Provider,{value:new f.J,children:(0,xe.jsx)(Zs,{viewer:i,codeshare:a.codeshare})})})};zs.getInitialProps=function(){var e=(0,s.Z)(t().mark((function e(n){var a,r,s,l,o;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=(0,Hs.Z)(n),r=a.match(/^\/([^\/?]+)/),s=r&&r[1],b.Z.assert(s,"url is invalid",{url:a}),!((l=Ln().encodeRelayId("Codeshare",s)).length>127)){e.next=7;break}throw new b.Z("Your codeshare url is too long. Please shorten your codeshare url and try again. Codeshare IDs must be less than 127 characters.",{status:400});case 7:return e.next=9,(0,k.Z)(n,i,Vs(Vs({codeshareId:l},Pn),z));case 9:return o=e.sent,e.abrupt("return",Vs(Vs({},o),{},{codeshareId:l}));case 11:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();var qs=zs},57376:function(e,n,a){"use strict";a.r(n);const r=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"codeHistoryAfter"},{defaultValue:null,kind:"LocalArgument",name:"codeHistoryFirst"},{defaultValue:null,kind:"LocalArgument",name:"id"}],n=[{kind:"Variable",name:"id",variableName:"id"}],a={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"userId",storageKey:null},l={alias:null,args:null,kind:"ScalarField",name:"me",storageKey:null},t={alias:null,args:null,kind:"ScalarField",name:"value",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"historyId",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"createdAt",storageKey:null},d={alias:null,args:null,concreteType:"CreatedBy",kind:"LinkedField",name:"createdBy",plural:!1,selections:[l,s,{alias:null,args:null,kind:"ScalarField",name:"clientId",storageKey:null}],storageKey:null},u={alias:null,args:null,kind:"ScalarField",name:"cursor",storageKey:null},c=[{kind:"Variable",name:"after",variableName:"codeHistoryAfter"},{kind:"Variable",name:"first",variableName:"codeHistoryFirst"}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"refetchableCodeHistoryEdgesRefetchQuery",selections:[{alias:null,args:n,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"refetchableCodeHistoryEdges_codeshare"}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"refetchableCodeHistoryEdgesRefetchQuery",selections:[{alias:null,args:n,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[a,r,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"CreatedBy",kind:"LinkedField",name:"createdBy",plural:!1,selections:[s,l],storageKey:null},{alias:null,args:null,concreteType:"CodeCheckpoint",kind:"LinkedField",name:"codeCheckpoint",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"codeHistoryId",storageKey:null},t,{alias:null,args:null,concreteType:"CodeHistoryEdge",kind:"LinkedField",name:"codeHistoryEdge",plural:!1,selections:[{alias:null,args:null,concreteType:"CodeHistory",kind:"LinkedField",name:"node",plural:!1,selections:[r,o,t,i,d],storageKey:null},u],storageKey:null}],storageKey:null},{alias:null,args:c,concreteType:"CodeHistoryConnection",kind:"LinkedField",name:"codeHistory",plural:!1,selections:[{alias:null,args:null,concreteType:"CodeHistoryConnectionEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"CodeHistory",kind:"LinkedField",name:"node",plural:!1,selections:[r,o,t,i,d,a],storageKey:null},u],storageKey:null},{alias:null,args:null,concreteType:"PageInfo",kind:"LinkedField",name:"pageInfo",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"endCursor",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"hasNextPage",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:c,filters:null,handle:"connection",key:"Codeshare_codeHistory",kind:"LinkedHandle",name:"codeHistory"}],type:"Codeshare",abstractKey:null}],storageKey:null}]},params:{cacheID:"d5a3d09d6d7e477641aef6aef8b6a91b",id:null,metadata:{},name:"refetchableCodeHistoryEdgesRefetchQuery",operationKind:"query",text:"query refetchableCodeHistoryEdgesRefetchQuery(\n  $codeHistoryAfter: String\n  $codeHistoryFirst: Int!\n  $id: ID!\n) {\n  node(id: $id) {\n    __typename\n    ...refetchableCodeHistoryEdges_codeshare\n    id\n  }\n}\n\nfragment refetchableCodeHistoryEdges_codeshare on Codeshare {\n  id\n  createdBy {\n    userId\n    me\n  }\n  codeCheckpoint {\n    codeHistoryId\n    value\n    codeHistoryEdge {\n      node {\n        id\n        historyId\n        value\n        createdAt\n        createdBy {\n          me\n          userId\n          clientId\n        }\n      }\n      cursor\n    }\n  }\n  codeHistory(after: $codeHistoryAfter, first: $codeHistoryFirst) {\n    edges {\n      node {\n        id\n        historyId\n        value\n        createdAt\n        createdBy {\n          me\n          userId\n          clientId\n        }\n        __typename\n      }\n      cursor\n    }\n    pageInfo {\n      endCursor\n      hasNextPage\n    }\n  }\n}\n"}}}();r.hash="5480aec223e32374eed87a6905412379",n.default=r},66880:function(e,n,a){"use strict";a.r(n);const r=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"codeshareUsersAfter"},{defaultValue:null,kind:"LocalArgument",name:"codeshareUsersFirst"},{defaultValue:null,kind:"LocalArgument",name:"id"}],n=[{kind:"Variable",name:"id",variableName:"id"}],a={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},s={alias:null,args:null,concreteType:"CreatedBy",kind:"LinkedField",name:"createdBy",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"userId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"me",storageKey:null}],storageKey:null},l=[{kind:"Variable",name:"after",variableName:"codeshareUsersAfter"},{kind:"Variable",name:"first",variableName:"codeshareUsersFirst"}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"refetchableCodeshareUserEdgesQuery",selections:[{alias:null,args:n,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"refetchableCodeshareUserEdges_codeshare"}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"refetchableCodeshareUserEdgesQuery",selections:[{alias:null,args:n,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[a,r,{kind:"InlineFragment",selections:[s,{alias:null,args:l,concreteType:"CodeshareUsersConnection",kind:"LinkedField",name:"users",plural:!1,selections:[{alias:null,args:null,concreteType:"CodeshareUserConnectionEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"CodeshareUser",kind:"LinkedField",name:"node",plural:!1,selections:[r,{alias:null,args:null,kind:"ScalarField",name:"createdAt",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"modifiedAt",storageKey:null},s,{alias:null,args:null,kind:"ScalarField",name:"color",storageKey:null},{alias:null,args:null,concreteType:"CursorType",kind:"LinkedField",name:"cursor",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"position",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"selectionEnd",storageKey:null}],storageKey:null},a],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cursor",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"PageInfo",kind:"LinkedField",name:"pageInfo",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"endCursor",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"hasNextPage",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:l,filters:[],handle:"connection",key:"Codeshare_users",kind:"LinkedHandle",name:"users"}],type:"Codeshare",abstractKey:null}],storageKey:null}]},params:{cacheID:"9e600d872023f0845bfe842121700fc5",id:null,metadata:{},name:"refetchableCodeshareUserEdgesQuery",operationKind:"query",text:"query refetchableCodeshareUserEdgesQuery(\n  $codeshareUsersAfter: String\n  $codeshareUsersFirst: Int!\n  $id: ID!\n) {\n  node(id: $id) {\n    __typename\n    ...refetchableCodeshareUserEdges_codeshare\n    id\n  }\n}\n\nfragment refetchableCodeshareUserEdges_codeshare on Codeshare {\n  id\n  createdBy {\n    userId\n    me\n  }\n  users(first: $codeshareUsersFirst, after: $codeshareUsersAfter) {\n    edges {\n      node {\n        id\n        createdAt\n        modifiedAt\n        createdBy {\n          userId\n          me\n        }\n        color\n        cursor {\n          position\n          selectionEnd\n        }\n        __typename\n      }\n      cursor\n    }\n    pageInfo {\n      endCursor\n      hasNextPage\n    }\n  }\n}\n"}}}();r.hash="432679eebdeadeba528b71c43deeea74",n.default=r},6327:function(e,n,a){"use strict";a.d(n,{Z:function(){return s}});var r=a(75396);function s(e){return e.title||(e.createdAt?(0,r.Z)(e.createdAt):"")}},75396:function(e,n,a){"use strict";a.d(n,{Z:function(){return r}});a(23123),a(39714),a(21249),a(92222);function r(e,n){if(!e)return"";const a=new Date(e).toString().split(" "),r=a[1],s=a[2];let l=a[3];const t=a[4].split(":").map((e=>parseInt(e,10)));t.pop();let o=t[0],i=o>=12?"PM":"AM";o%=12,0===o&&(o=12);let d=t[1]+"";if(d=2===d.length?d:"0"+d,n)return"".concat(o,":").concat(d," ").concat(i);return(new Date).getFullYear()+""===l?"".concat(r," ").concat(s," ").concat(o,":").concat(d," ").concat(i):"".concat(r," ").concat(s,", ").concat(l)}},2349:function(e,n,a){"use strict";a.d(n,{Z:function(){return l}});a(39714);var r=a(50559),s=a(92432);function l(e){var n;return e.req?(r.Z.assert(e.req.url,"url is missing",{req:e.req}),s.Z.debug("NEXTPAGEURL server",e.req.url.pathname),"string"===typeof e.req.url?e.req.url.toString():e.req.url.pathname):(s.Z.debug("NEXTPAGEURL client",{pathname:window.location.pathname,state:null===(n=window.history)||void 0===n?void 0:n.state}),window.location.pathname)}},30143:function(e,n,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/[codeshareId]",function(){return a(6255)}])}},function(e){e.O(0,[774,523,126,633,365,607,104,578,460,509,366,698,537,908,888,179],(function(){return n=30143,e(e.s=n);var n}));var n=e.O();_N_E=n}]);